if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function k(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return null!=a}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Rg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(sa,Error);sa.prototype.name="CustomError";var ta=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function ua(a,b){return-1!=a.indexOf(b)}
function va(a,b){var c=0;a=ta(String(a)).split(".");b=ta(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",h=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;c=wa(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||wa(0==f[2].length,0==h[2].length)||wa(f[2],h[2]);f=f[3];h=h[3]}while(0==c)}return c}function wa(a,b){return a<b?-1:a>b?1:0};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a,b,c){this.ng=c;this.Kf=a;this.Gg=b;this.ld=0;this.bd=null}Fa.prototype.get=function(){var a;0<this.ld?(this.ld--,a=this.bd,this.bd=a.next,a.next=null):a=this.Kf();return a};Fa.prototype.put=function(a){this.Gg(a);this.ld<this.ng&&(this.ld++,a.next=this.bd,this.bd=a)};var Ga;a:{var Ha=da.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function t(a){return ua(Ga,a)};function Ja(){return t("Safari")&&!(La()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function La(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ma(a){da.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Pa(){this.wd=this.mc=null}var Ra=new Fa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.wd?this.wd.next=c:this.mc=c;this.wd=c};Pa.prototype.remove=function(){var a=null;this.mc&&(a=this.mc,this.mc=this.mc.next,this.mc||(this.wd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Od=null}Qa.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Od=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(-1!=String(da.Promise).indexOf("[native code]")){var a=da.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(Na||(Na=Oa()),Na(a)):da.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a;a=Wa.remove();){try{a.Od.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function u(a,b){this.Ra=0;this.hf=void 0;this.Rc=this.bc=this.C=null;this.ad=this.Md=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.gc=this.Ec=this.child=null;this.zd=!1}Za.prototype.reset=function(){this.context=this.gc=this.Ec=this.child=null;this.zd=!1};var $a=new Fa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Ec=a;d.gc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Ya(b,2,a);return b}function bb(a){return new u(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(ra(b,a))}function eb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},l=0,p;l<a.length;l++)p=a[l],cb(p,ra(f,l),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new fb(c,a,b)}
u.prototype.then=function(a,b,c){return gb(this,ja(a)?a:null,ja(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.pe=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.bc||2!=a.Ra&&3!=a.Ra||ib(a);a.Rc?a.Rc.next=b:a.bc=b;a.Rc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new u(function(a,h){e.Ec=b?function(c){try{var e=b.call(d,c);a(e)}catch(L){h(L)}}:a;e.gc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof jb?h(b):a(e)}catch(L){h(L)}}:h});e.child.C=a;hb(a,e);return e.child}u.prototype.Mg=function(a){this.Ra=0;Ya(this,2,a)};u.prototype.Ng=function(a){this.Ra=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ra&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,db(c,a.Mg,a.Ng,a)||(a.hf=c,a.Ra=b,a.C=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof u)return hb(a,ab(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){l||(l=!0,d.call(e,a))}function h(a){l||(l=!0,c.call(e,a))}var l=!1;try{b.call(a,h,f)}catch(p){f(p)}}function ib(a){a.Md||(a.Md=!0,Sa(a.Rf,a))}function mb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Rc=null);return b}
u.prototype.Rf=function(){for(var a;a=mb(this);){var b=this.Ra,c=this.hf;if(3==b&&a.gc&&!a.zd){var d;for(d=this;d&&d.ad;d=d.C)d.ad=!1}if(a.child)a.child.C=null,nb(a,b,c);else try{a.zd?a.Ec.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Md=!1};function nb(a,b,c){2==b?a.Ec.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function kb(a,b){a.ad=!0;Sa(function(){a.ad&&ob.call(null,b)})}var ob=Ma;function jb(a){sa.call(this,a)}r(jb,sa);jb.prototype.name="cancel";
function fb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function pb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],l=0;l<e+1;l++)h[l]=[],h[l][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(l=1;l<=e;l++)for(p=1;p<=f;p++)c(a[l-1],b[p-1])?h[l][p]=h[l-1][p-1]+1:h[l][p]=Math.max(h[l-1][p],h[l][p-1]);for(var L=[],l=e,p=f;0<l&&0<p;)c(a[l-1],b[p-1])?(L.unshift(d(l-1,p-1)),l--,p--):h[l-1][p]>h[l][p-1]?l--:p--;return L}function qb(a){return Aa(arguments,function(a,c){return a+c},0)}
function rb(a){return qb.apply(null,arguments)/arguments.length}function sb(a){var b=arguments.length;if(2>b)return 0;var c=rb.apply(null,arguments);return qb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function tb(a){return Math.sqrt(sb.apply(null,arguments))};var ub="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function vb(){}vb.prototype.next=function(){throw ub;};vb.prototype.te=function(){return this};function wb(a){if(a instanceof vb)return a;if("function"==typeof a.te)return a.te(!1);if(ha(a)){var b=0,c=new vb;c.next=function(){for(;;){if(b>=a.length)throw ub;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function zb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==ub)throw c;}else{a=wb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ub)throw c;}}}function Ab(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new vb;var b=new vb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ub;};return b};function Bb(a){Cb(a);return a.a.concat()}function Cb(a){if(a.Gf!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Db(a.$,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Gf!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Db(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function Db(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Eb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};function Fb(a,b){var c=Gb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Hb=t("Opera"),Ib=t("Trident")||t("MSIE"),Jb=t("Edge"),Kb=t("Gecko")&&!(ua(Ga.toLowerCase(),"webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Lb=ua(Ga.toLowerCase(),"webkit")&&!t("Edge"),Mb=t("Macintosh"),Nb=t("Windows"),Ob=t("Android"),Pb=Eb(),Qb=t("iPad"),Rb=t("iPod"),Sb;
a:{var Tb="",Ub=function(){var a=Ga;if(Kb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Jb)return/Edge\/([\d\.]+)/.exec(a);if(Ib)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Lb)return/WebKit\/(\S+)/.exec(a);if(Hb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Ub&&(Tb=Ub?Ub[1]:"");if(Ib){var Vb,Wb=da.document;Vb=Wb?Wb.documentMode:void 0;if(null!=Vb&&Vb>parseFloat(Tb)){Sb=String(Vb);break a}}Sb=Tb}var Xb=Sb,Gb={};function Yb(a){return Fb(a,function(){return 0<=va(Xb,a)})};var Zb=function(){var a;return Nb?(a=/Windows NT ([0-9.]+)/,(a=a.exec(Ga))?a[1]:"0"):Mb?(a=/10[_.][0-9_.]+/,(a=a.exec(Ga))?a[0].replace(/_/g,"."):"10"):Ob?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Ga))?a[1]:""):Pb||Qb||Rb?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Ga))?a[1].replace(/_/g,"."):""):""}();var $b=Eb()||t("iPod"),ac=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function bc(){var a;!(a=Ja()&&!Yb(10))&&(a=ac||$b)&&(a=!(0<=va(Zb,10)));this.mg=a;this.bg=!(this.mg||Ib&&!Yb(10));!Ib||Yb(11);this.Qg=La()||Ja()}var cc;function x(){return new window.Map}function dc(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function y(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ec(a,b){this.ra=a;this.l=b||this.Fe()}var fc=0;m=ec.prototype;m.id=g("ra");m.Fe=function(){return{}};m.rf=g("l");m.Ia=function(){return{id:this.ra,value:this.rf()}};m.lb=function(a){return"#"==a.substr(-1)?this.ra:null};function gc(a){return new ec(a.id,a.value)}function hc(a){return new ec(fc++,a||{})}function ic(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var jc={};q("lf.TransactionType",jc);jc.READ_ONLY=0;jc.READ_WRITE=1;function z(a,b,c,d,e){this.rd=a;this.fg=b;this.Pg=c;this.Mf=d;this.Ef=e}q("lf.TransactionStats",z);z.prototype.Kg=g("rd");z.prototype.success=z.prototype.Kg;z.prototype.eg=g("fg");z.prototype.insertedRowCount=z.prototype.eg;z.prototype.Og=g("Pg");z.prototype.updatedRowCount=z.prototype.Og;z.prototype.Lf=g("Mf");z.prototype.deletedRowCount=z.prototype.Lf;z.prototype.Df=g("Ef");z.prototype.changedTableCount=z.prototype.Df;function kc(a,b){this.td=a;this.Pa=b||null;this.O=w();this.rd=!1;this.ya=null}kc.prototype.ka=function(){return(0==this.td?this.pc():lc(this)).then(function(a){this.rd=!0;return a}.bind(this))};function lc(a){try{mc(a.Pa)}catch(b){return bb(b)}return nc(a).then(function(a){this.Pa.ka();return a}.bind(a))}function nc(a){oc(a);pc(a);return a.pc()}
function oc(a){a.Pa.fb.forEach(function(a,c){c=this.Pa.da().get(c);c=this.H(c.getName(),c.ib.bind(c),0);var b=y(a.wa).map(function(a){return a.id()});0<b.length&&c.remove(b).pe(this.Oe,this);a=y(a.la).map(function(a){return a[1]}).concat(y(a.va));c.put(a).pe(this.Oe,this)},a)}function pc(a){qc(a.Pa).forEach(function(a){var b=this.H(a.getName(),gc,1);b.remove([]);b.put(a.Ia())},a)}kc.prototype.Oe=function(a){this.O.reject(a)};
kc.prototype.X=function(){if(null===this.ya)if(this.rd)if(0==this.td)this.ya=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Pa.fb.forEach(function(e){d++;a+=e.va.size;c+=e.la.size;b+=e.wa.size});this.ya=new z(!0,a,c,b,d)}else this.ya=new z(!1,0,0,0,0);return this.ya};function rc(a){this.Hg=a}rc.prototype.toString=g("Hg");var sc=new rc("backstore"),tc=new rc("cache"),uc=new rc("indexstore"),vc=new rc("engine"),wc=new rc("runner"),xc=new rc("observerregistry"),A=new rc("schema");function B(a){return n(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function yc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function zc(a,b){this.ra=a;this.l=b||{}}function Ac(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}zc.prototype.V=g("ra");function Bc(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function Cc(a,b){b.forEach(function(a){delete this.l[a]},a)}zc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function Dc(a){return new zc(a.id,JSON.parse(a.value))};function Ec(a,b,c){this.Y=a;this.Eb=b;this.jf=c}m=Ec.prototype;m.get=function(a){if(0==a.length)return this.Qd();var b=this.Eb;return Fc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.l[a])})})};function Fc(a,b){var c=x(),d=w();a=Ac(b).map(function(a){return new u(function(b,d){var e;try{e=this.Y.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Dc(a.target.result);c.set(a.V(),a);b()}},this)},a);eb(a).then(function(){d.resolve(c)});return d.ha}
m.Qd=function(){return new u(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Dc(b.value).l,h;for(h in f)c.push(this.Eb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.Y.name,c));Bc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this));var b=x();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.Y.name,c));Cc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return 0==Object.keys(a.l).length?this.Y.delete(a.V()):this.Y.put(a.Ia())}.bind(this))},this);return eb(a)};function Gc(a,b,c){a=a.b(tc);var d=[c<<9,(c+1<<9)-1];b=a.Sa(b,d[0],d[1]);c=new zc(c);Bc(c,b);return c}
function Hc(a,b){return new zc(b)};function Ic(a){this.U=a.b(tc);this.B=a.b(uc);this.g=a.b(A)}Ic.prototype.update=function(a){a.forEach(function(a){Jc(this,a);Kc(this,a)},this)};function Kc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.la.forEach(function(a){this.U.set(c,a[1])},a)}function Jc(a,b){var c=a.g.table(b.getName());Lc(b).forEach(function(a){Mc(this,c,a)},a)}
function Mc(a,b,c){var d=a.B.jc.get(b.getName())||[],e=0;d.forEach(function(a){try{Nc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Nc(a,[c[1],c[0]])},this),h;}},a)}function Nc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.gb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Pc={};q("lf.ConstraintAction",Pc);Pc.RESTRICT=0;Pc.CASCADE=1;var Qc={};q("lf.ConstraintTiming",Qc);Qc.IMMEDIATE=0;Qc.DEFERRABLE=1;var Rc={};q("lf.Order",Rc);Rc.DESC=0;Rc.ASC=1;var Sc={};q("lf.Type",Sc);Sc.ARRAY_BUFFER=0;Sc.BOOLEAN=1;Sc.DATE_TIME=2;Sc.INTEGER=3;Sc.NUMBER=4;Sc.STRING=5;Sc.OBJECT=6;var Tc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Tc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Uc(){this.$=x();this.size=0}m=Uc.prototype;m.has=function(a){return this.$.has(a)};m.set=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Ub=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Ub(b,c)},this);return this};
m.delete=function(a,b){var c=this.$.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.$.delete(a);return b};m.get=function(a){a=this.$.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.$.clear();this.size=0};m.keys=function(){return dc(this.$)};m.values=function(){var a=[];this.$.forEach(function(b){a.push.apply(a,C(b))});return a};function Vc(a){this.B=a.b(uc);this.g=a.b(A);this.U=a.b(tc);this.Wc=null}function Wc(a,b,c){var d=b.Kb.tg;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new D(202,b.j());},this)},a)}function Xc(a,b,c,d){b.Kb.Pd.forEach(function(a){a.timing==d&&Yc(this,a,c)},a)}function Yc(a,b,c){var d=Zc(a,b);c.forEach(function(a){if($c(a[0],a[1],b.name)&&(a=a[1].lb(b.name),null!==a&&!d.hb(a)))throw new D(203,b.name);},a)}
function Zc(a,b){null===a.Wc&&(a.Wc=x());var c=a.Wc.get(b.name)||null;null===c&&(c=a.g.table(b.Ua)[b.Fc].Ba(),c=a.B.get(c.j()),a.Wc.set(b.name,c));return c}function $c(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function ad(a,b,c,d){b=bd(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&cd(a,b,c,function(a,b,c){if(b.hb(c))throw new D(203,a.name);}))}
function dd(a,b,c){b=bd(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Uc;cd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Ub(a.Be,b)});return d}function ed(a,b,c){var d=new Uc;cd(a,c,b,function(a,b,c,l){b.get(c).forEach(function(b){d.set(b,{Nd:a,yg:l[1]})})});return d}function cd(a,b,c,d){b.forEach(function(a){var b=this.B.get(a.name),e=Zc(this,a);c.forEach(function(c){if($c(c[0],c[1],e.getName())){var f=c[0].lb(e.getName());d(a,b,f,c)}},this)},a)}
function fd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Xc(a,b,c,d))}function gd(a,b,c,d){0!=c.length&&(Xc(a,b,c,d),ad(a,b,c,d))}function hd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),ad(a,b,c,d))}
function id(a,b,c){var d={oe:[],lf:new Uc},e=new Uc;e.Ub(b.getName(),c.map(function(a){return a.id()}));do{var f=new Uc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=dd(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Wd(b))},a);e=f;d.lf.Wd(e)}while(0<e.size);return d};function jd(a){this.va=x();this.la=x();this.wa=x();this.w=a}m=jd.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.la.set(a.id(),b);this.wa.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Wd=function(a){a.va.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Lc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+dc(this.va).toString()+"], ["+dc(this.la).toString()+"], ["+dc(this.wa).toString()+"]"};function kd(a){var b=new jd(a.w);a.va.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.hg=function(){return 0==this.va.size&&0==this.wa.size&&0==this.la.size};function ld(a,b){this.aa=x();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(A);this.U=a.b(tc);this.B=a.b(uc);this.za=new Vc(a);this.cd=new Ic(a);this.fb=x()}function qc(a){var b=[];dc(a.fb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Bb()&&(a.Ca().forEach(function(a){b.push(this.B.get(a.j()))},this),b.push(this.B.get(a.getName()+".#")))},a);return b}m=ld.prototype;m.da=g("aa");
m.zb=function(a,b){md(this,a);Wc(this.za,a,b);fd(this.za,a,b,0);for(var c=0;c<b.length;c++)nd(this,a,[null,b[c]])};function nd(a,b,c){var d=b.getName(),e=a.fb.get(d)||new jd(d);a.fb.set(d,e);try{Mc(a.cd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){md(this,a);Wc(this.za,a,b);b=b.map(function(a){return[this.U.get(a.id()),a]},this);od(this,a,b);gd(this.za,a,b,0);b.forEach(function(b){nd(this,a,b)},this)};m.Rd=function(a,b){md(this,a);Wc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Kb.nd;if(null===h)f=null;else{f=this.za;var h=h.j(),l=d.lb(h);f=f.B.get(h).get(l);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.ra=f,gd(this.za,a,[[e,d]],0)):fd(this.za,a,[d],0);nd(this,a,[e,d])}};
m.remove=function(a,b){md(this,a);pd(this,a,b);hd(this.za,a,b,0);for(var c=0;c<b.length;c++)nd(this,a,[b[c],null])};function od(a,b,c){b=bd(a.g.info(),b.getName(),1);if(null!==b){var d=ed(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Nd.Be),d=this.U.get(a),e=c.ib(d.Ia());e.l[b.Nd.tb]=b.yg.l[b.Nd.Fc];nd(this,c,[d,e])},this)},a)}}
function pd(a,b,c){if(null!==bd(a.g.info(),b.getName(),1)){b=id(a.za,b,c);var d=b.lf;b.oe.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);hd(this.za,b,a,0);a.forEach(function(a){nd(this,b,[a,null])},this)},a)}}function mc(a){a.fb.forEach(function(a){var b=this.aa.get(a.getName());fd(this.za,b,y(a.va),1);hd(this.za,b,y(a.wa),1);gd(this.za,b,y(a.la),1)},a)}m.ka=aa();m.Hb=function(){var a=y(this.fb).map(function(a){return kd(a)});this.cd.update(a)};
function md(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.m=b;this.ea=this.from==F?!1:c;this.na=this.m==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.m==F?"unbound":this.m)+(this.na?")":"]")};function qd(a){if(rd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.m==F||(c=new E(a.m,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.m,this.from,this.na,this.ea)};
function sd(a,b){var c=td(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.m==F||d.m>a.from||d.m==a.from&&!d.na&&!a.ea}function ud(){return new E(F,F,!1,!1)}function rd(a){return a.from==F&&a.m==F}function vd(a){return a.from==a.m&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.m==F||a<this.m||a==this.m&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function td(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function wd(a,b){var c=td(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=td(a.m,b.m,!1,a.na,b.na));return c}function xd(a){if(0==a.length)return[];a.sort(wd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].m,F,!0,!1):new E(a[c-1].m,a[c].from,!0,!0);return b};function yd(a){this.ic=[];n(a)&&this.add(a)}yd.prototype.toString=function(){return this.ic.map(function(a){return a.toString()}).join(",")};yd.prototype.hb=function(a){return this.ic.some(function(b){return b.contains(a)})};yd.prototype.yb=g("ic");
yd.prototype.add=function(a){if(0!=a.length)if(a=this.ic.concat(a),1==a.length)this.ic=a;else{a.sort(wd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(sd(c,a[d])){var e=a[d],f=ud();if(c.from!=F&&e.from!=F){var h=td(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.m!=F&&e.m!=F&&(h=td(c.m,e.m,!1),-1!=h?(f.m=c.m,f.na=0!=h?c.na:c.na&&e.na):(f.m=e.m,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.ic=b}};
function zd(a,b){var c=[];a.yb().map(function(a){return b.yb().map(function(b){var c;if(sd(a,b)){c=ud();var d=td(a.from,b.from,!0),d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.m==F||b.m==F?b=a.m==F?b:a:(d=td(a.m,b.m,!1),b=0==d?a.na?a:b:-1==d?a:b);c.m=b.m;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new yd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Xa=null}G.prototype.s=function(){return C(this.L)};function Ad(a){return a.entries.map(function(a){return a.ua.l})}function Bd(a){return a.entries.map(function(a){return a.ua.id()})}function Cd(a,b){return a.Xa.get(b.j())}var Dd=null;function Ed(){null===Dd&&(Dd=new G([],[]));return Dd}
function Fd(a){if(0==a.length)return Ed();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),C(a[0].L))}function Gd(a){if(0==a.length)return Ed();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),C(a[0].L))}
function Hd(a,b){var c=1<b.length;a=a.map(function(a){return new Id(a,c)});return new G(a,b)}function Id(a,b){this.ua=a;this.id=Jd++;this.Td=b}var Jd=0;function H(a,b){var c=b.Ja;return null!==c&&a.ua.l.hasOwnProperty(c)?a.ua.l[c]:a.Td?a.ua.l[Kd(b.H())][b.getName()]:a.ua.l[b.getName()]}function Ld(a,b,c){var d=b.Ja;if(null!=d)a.ua.l[d]=c;else if(a.Td){var d=Kd(b.H()),e=a.ua.l[d];null==e&&(e={},a.ua.l[d]=e);e[b.getName()]=c}else a.ua.l[b.getName()]=c}
function Md(a,b,c,d){function e(a,b){if(a.Td){a=a.ua.l;for(var c in a)f[c]=a[c]}else f[b[0]]=a.ua.l}var f={};e(a,b);e(c,d);a=new ec(-1,f);return new Id(a,!0)};q("lf.bind",function(a){return new Nd(a)});function Nd(a){this.fa=a}q("lf.Binder",Nd);Nd.prototype.Ba=g("fa");function Od(){this.Ue=Pd();var a=Qd();this.Mb=x();this.Mb.set(1,Rd());this.Mb.set(2,Sd());this.Mb.set(4,a);this.Mb.set(3,a);this.Mb.set(5,Td());this.Mb.set(6,Ud())}var Vd;function Wd(){null!=Vd||(Vd=new Od);return Vd}function Xd(a,b,c){a=a.Mb.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Pd(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Rd(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Qd(){var a=Rd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Td(){var a=Qd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Ud(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Sd(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.C=null}var Yd=[];I.prototype.getParent=g("C");I.prototype.Za=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Zd(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Yd}function $d(a,b){return J(a)[b]||null}function ae(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function K(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function be(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return be(this,J(this).indexOf(a))};function ce(a,b,c){$d(a,c).C=null;b.C=a;a.h[c]=b}function de(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){de(a,b,c)})};function ee(){I.call(this);this.ra=ge++}r(ee,I);var ge=0;ee.prototype.V=g("ra");function he(a,b,c){ee.call(this);this.I=a;this.value=b;this.D=c;this.sc=Xd(Wd(),this.I.F(),this.D);this.Ta=!1;this.ac=b}r(he,ee);m=he.prototype;m.Lb=function(){var a=new he(this.I,this.value,this.D);a.ac=this.ac;a.qd(this.Ta);var b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.s=function(a){a=null!=a?a:B();a.add(this.I.H());return a};m.qd=ca("Ta");
function ie(a){var b=!1;a.value instanceof Nd||(b="array"==fa(a.value)?!a.value.some(function(a){return a instanceof Nd}):!0);if(!b)throw new D(501);}m.eval=function(a){ie(this);if("in"==this.D)return je(this,a);var b=a.entries.filter(function(a){return this.sc(H(a,this.I),this.value)!=this.Ta},this);return new G(b,a.s())};
m.bind=function(a){if(this.ac instanceof Nd){var b=this.ac.Ba();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==fa(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof Nd){var c=b.Ba();if(a.length<=c)throw new D(510);return a[b.Ba()]}return b}))};function je(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ta}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(a,b.s())}
m.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Ta?"(complement)":"")+" "+this.value+")"};m.fd=function(){ie(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.qe=function(){var a=null;if("between"==this.D)a=new E(ke(this,this.value[0]),ke(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new yd(this.Ta?xd(a):a);a=ke(this,this.value);a="eq"==this.D?new E(a,a,!1,!1):"gte"==this.D?new E(a,F,!1,!1):"gt"==this.D?new E(a,F,!0,!1):"lte"==this.D?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new yd(this.Ta?qd(a):[a])};function ke(a,b){return 2==a.I.F()?b.getTime():b};function le(a){this.ba=a;this.Sc=this.Fa=null}function me(a,b){null===a.Fa&&null!=a.u&&(a.Fa=ne(a.u));return a.Fa.get(b)||null}function ne(a){var b=x();de(a,function(a){b.set(a.V(),a)});return b}function oe(a,b){b.u&&(a.u=b.u.Lb());a.Sc=b}le.prototype.bind=function(){return this};function pe(a,b){a=a.u;null!=a&&de(a,function(a){a instanceof he&&a.bind(b)})};function qe(a){le.call(this,a)}r(qe,le);function re(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}qe.prototype.da=function(){return B(this.from)};qe.prototype.clone=function(){var a=new qe(this.ba);oe(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Qb&&(a.Qb=this.Qb);this.Wb&&(a.Wb=this.Wb);a.ab=this.ab;return a};
qe.prototype.bind=function(a){qe.eb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.Ba()]);null!=this.Wb&&(this.K=a[this.Wb.Ba()]);pe(this,a);return this};function se(a,b){this.Ga=a;this.aa=b}se.prototype.Za=g("Ga");se.prototype.da=g("aa");function te(a){var b=B();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function ue(a,b){this.global=a;this.Na=a.b(sc);this.od=b.map(function(a){return a.context});this.df=b.map(function(a){return a.de});this.Hd=te(this.df);this.re=ve(this);this.Cb=w()}function ve(a){return a.od.some(function(a){return!(a instanceof qe)})?1:0}m=ue.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.Za().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.re?void 0:new ld(this.global,this.Hd),c=[],d=this.df.slice(),e=this.od;return a().then(function(){this.ja=this.Na.Db(this.re,C(this.Hd),b);return this.ja.ka()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){null!=b&&b.Hb();throw a;})};m.F=g("re");m.da=g("Hd");m.V=function(){return ka(this)};m.ae=aa();
m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function we(a,b){ue.call(this,a,b);this.Gb=a.b(xc)}r(we,ue);we.prototype.getPriority=k(0);we.prototype.ae=function(a){this.od.forEach(function(b,c){xe(this.Gb,b,a[c])},this)};function ye(a,b){this.c=a;this.Gb=a.b(xc);this.Ha=a.b(wc);this.cd=new Ic(a);this.fb=b;var c=a.b(A);a=this.fb.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Cb=w()}m=ye.prototype;m.exec=function(){this.cd.update(this.fb);this.Ic();return v()};m.F=k(1);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=k(1);m.Ic=function(){var a=ze(this.Gb,this.aa);0!=a.length&&(a=new we(this.c,a),Ae(this.Ha,a))};function Be(a){this.c=a;this.Na=a.b(sc);this.Ha=a.b(wc)}Be.prototype.Zd=function(a){a=new ye(this.c,a);Ae(this.Ha,a)};function M(a,b){this.Yb=a;this.i=b;this.Wa=x()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.Zc=g("i");M.prototype.$c=function(){throw new D(351);};function Ce(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function De(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Da=function(a){return Ce(this.i,"@rev/R").then(function(a){this.Qa=a;return Ce(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Wa.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Wa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return De(d,b)}.bind(this))};
function Ee(a,b,c){var d=a.Wa.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Qa};return De(this.i,a)}.bind(a)):v()}M.prototype.qc=function(a){return Ee(this,a,k(null)).then(function(){this.Wa.delete(a);return De(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.qc;
M.prototype.nc=function(a,b,c){return Ee(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.nc;M.prototype.rc=function(a,b){return Ee(this,a,function(a){var c=a.P;delete c[b];return{R:this.Qa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.rc;M.prototype.Hc=function(a,b,c){return Ee(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Hc;
M.prototype.vb=function(){throw new D(351);};M.prototype.createRow=M.prototype.vb;M.prototype.yc=g("Yb");M.prototype.getVersion=M.prototype.yc;M.prototype.cc=function(a){var b=w();a=this.Wa.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=dc(this.Wa).map(function(b){return this.cc(b).then(function(c){a[b]=c})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Fe(a,b,c){kc.call(this,b,c);this.i=a}r(Fe,kc);Fe.prototype.H=function(a){return this.i.wc(a)};
Fe.prototype.pc=function(){if(0==this.td)return this.O.resolve(),this.O.ha;var a=this.Pa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Qa+1;this.i.Qa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Wa.get(e);a.va.forEach(function(a,e){c[e]={R:b,T:d,P:a.l}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].l}});a.wa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Qa=b-1,c=y(a).map(function(a){return Ge(this.i,a.getName())},this),
eb(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ha};function He(){this.Aa=x()}function Ie(a,b){if(0==b.length)return y(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}He.prototype.getData=g("Aa");He.prototype.get=function(a){return v(Ie(this,a))};function Je(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}He.prototype.put=function(a){Je(this,a);return v()};function Ke(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
He.prototype.remove=function(a){Ke(this,a);return v()};function Le(a){return 0==a.Aa.size?0:dc(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function Me(a,b){this.g=a;this.yf=b;this.Gc=x();this.Qa=-1;this.L=x();this.Wa=x();this.Ed=null}m=Me.prototype;
m.Da=function(a){this.i=this.yf.child(this.g.name());var b=a||function(){return v()};return Ce(this.i,"@db/version").then(function(a){return null===a?De(this.i,Ne(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?Ce(this.i,"@rev/R").then(function(a){this.Qa=a;return Ce(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Wa.set(b,a[b]);a=this.g.oa().map(function(a){return Ge(this,a.getName())},this);
return eb(a)}.bind(this)).then(function(){Oe(this);Pe(this);return v()}.bind(this)):this.be(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.i);return c.Da(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return De(a,{version:this.g.version()},!0)}.bind(this))};
function Pe(a){a.i.off();a.i.on("child_removed",a.vg.bind(a));a.Fd&&(a.Fd.off(),a.Gc.clear());a.Fd=a.i.orderByChild("R").startAt(a.Qa+1);a.Fd.on("value",a.Zd.bind(a))}function Oe(a){fc=y(a.L).map(function(a){return Le(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.vg=function(a){var b=a.val(),c=this.Gc.get(b.T)||null;null===c&&(c=B(),this.Gc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=Qe(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),c=dc(a.wa);0<c.length&&Ke(b,c);var f=y(a.va);a.la.forEach(function(a){f.push(a[1])});Je(b,f)},this),0<a.length&&this.Cc(a),Pe(this))};
function Qe(a,b){var c=B(),d=x();a.Wa.forEach(function(a,b){var e=this.L.get(b),f=new jd(b);this.Gc.has(a)&&(b=C(this.Gc.get(a)),b.forEach(function(a){c.add(a)}),Ie(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var l=this.L.get(a.getName()),e=this.g.table(a.getName()).ib({id:b,value:e.P});l.getData().has(b)?a.modify([Ie(l,[b])[0],e]):a.add(e)}}}.bind(a));return y(d).filter(function(a){return!a.hg()})}
function Ge(a,b){var c=w(),d=a.Wa.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new He,f=[];a.forEach(function(a){f.push(e.ib({id:parseInt(a.key(),10),value:a.val().P}))});Je(d,f);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function Ne(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Qa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.L.set(a,new He);this.Wa.set(a,d)},a);return b}
m.Db=function(a,b,c){return new Fe(this,a,c)};m.wc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ca("Ed");m.Cc=function(a){null!=this.Ed&&this.Ed(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Yb=a;this.Qc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.Zc=g("i");N.prototype.getRawDBInstance=N.prototype.Zc;N.prototype.$c=g("ja");N.prototype.getRawTransaction=N.prototype.$c;N.prototype.qc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.qc;
function Re(a,b,c,d){return new u(function(a,f){var e;try{var l=this.ja.objectStore(b);e=l.openCursor()}catch(p){f(p);return}e.onsuccess=function(){var b=e.result;b?(c(b),b.continue()):(d(l),a())};e.onerror=f},a)}function Se(a){return a instanceof ArrayBuffer?ic(a):a instanceof Date?a.getTime():a}
function Te(a,b,c){function d(a){var b=Dc(a.value),d=b.l,e;for(e in d){var f=gc(d[e]);c(f);d[e]=f.Ia()}a.update(b.Ia())}function e(a){var b=gc(a.value);c(b);a.update(b.Ia())}return Re(a,b,a.Qc?d:e,aa())}N.prototype.nc=function(a,b,c){var d=Se(c);return Te(this,a,function(a){a.l[b]=d})};N.prototype.addTableColumn=N.prototype.nc;N.prototype.rc=function(a,b){return Te(this,a,function(a){delete a.l[b]})};N.prototype.dropTableColumn=N.prototype.rc;
N.prototype.Hc=function(a,b,c){return Te(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};N.prototype.renameTableColumn=N.prototype.Hc;function Ue(a,b){var c=[];return new u(function(a,e){var d;try{d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Qc){var e=Dc(b.value).l,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Se(a[c]);return hc(b)};
N.prototype.createRow=N.prototype.vb;N.prototype.yc=g("Yb");N.prototype.getVersion=N.prototype.yc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.cc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.cc=function(a){return Ue(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ve(a,b){this.Y=a;this.Eb=b}Ve.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?We(this):Xe(this);a=a.map(function(a){return new u(function(b,d){var c;try{c=this.Y.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Eb(a.target.result))}.bind(this)},this)},this);return eb(a)};
function Xe(a){return new u(function(a,c){var b=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Eb(c.value)),c.continue()):a(b)}.bind(this)},a)}function We(a){return new u(function(a,c){var b;try{b=this.Y.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Eb(a)},this);a(c)}.bind(this)},a)}
Ve.prototype.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ve.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return eb(a)};
Ve.prototype.remove=function(a){return new u(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Rb(function(){return this.Y.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ye(a,b,c,d,e){kc.call(this,c,e);this.c=a;this.ja=b;this.Qc=d;this.ja.oncomplete=this.O.resolve.bind(this.O);this.ja.onabort=this.O.reject.bind(this.O)}r(Ye,kc);Ye.prototype.H=function(a,b,c){return this.Qc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Ec(a,b,0==c?ra(Gc,this.c):Hc)):new Ve(this.ja.objectStore(a),b)};Ye.prototype.pc=function(){return this.O.ha};function Ze(a,b){this.c=a;this.g=b;this.Bd=b.ee.Of||!1}m=Ze.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var d;try{d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){$e(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.ke().then(function(b){fc=Math.max(fc,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function $e(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Bd);af(d);a.g.oa().forEach(ra(a.Hf,d),a);return b(c)}function af(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Hf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Bb()&&(b.Ca().forEach(function(b){bf(a,b.j())},this),bf(a,cf(b)))};function bf(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Db=function(a,b,c){b=this.i.transaction(df(b),0==a?"readonly":"readwrite");return new Ye(this.c,b,a,this.Bd,c)};
function df(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Bb()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(cf(a)))});return C(b)}
m.ke=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var l;try{l=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}l.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};l.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Bd?(a=Dc(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.wc=function(){throw new D(511);};m.subscribe=aa();m.Cc=aa();function ef(a,b,c){kc.call(this,b,c);this.Y=a;0==b&&this.O.resolve()}r(ef,kc);ef.prototype.H=function(a){return this.Y.wc(a)};ef.prototype.pc=function(){this.O.resolve();return this.O.ha};function ff(a){this.g=a;this.L=x()}m=ff.prototype;m.Da=function(){this.g.oa().forEach(this.cg,this);return v()};m.wc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Db=function(a,b,c){return new ef(this,a,c)};function gf(a,b){if(!a.L.has(b)){var c=new He;a.L.set(b,c)}}m.cg=function(a){gf(this,a.getName());a.Bb()&&(a.Ca().forEach(function(a){gf(this,a.j())},this),gf(this,cf(a)))};m.close=aa();m.subscribe=aa();m.Cc=aa();function hf(a){ff.call(this,a);this.kd=null}r(hf,ff);hf.prototype.subscribe=function(a){null===this.kd&&(this.kd=a)};hf.prototype.Cc=function(a){null===this.kd||this.kd(a)};function jf(a,b,c){this.ja=a;this.w='"'+b+'"';this.Eb=c}jf.prototype.get=function(a){var b=this.Eb;return kf(this.ja,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
jf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){kf(this.ja,b,[a.id(),JSON.stringify(a.l)])},this);return v()};jf.prototype.remove=function(a){kf(this.ja,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function mf(a,b,c){kc.call(this,b,c);this.i=a;this.L=x();this.Id=[]}r(mf,kc);function nf(a){return a.replace(".","__d__").replace("#","__s__")}mf.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new jf(this,nf(a),b),this.L.set(a,c));return c};function kf(a,b,c,d){var e=w();a.Id.push({Jg:b,zg:c,transform:d,O:e});return e.ha}
mf.prototype.pc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.O.resolve(f)}0<this.Id.length?(a=h=this.Id.shift(),b.executeSql(h.Jg,h.zg,e,c)):this.O.resolve(d)}.bind(this);0==this.td?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ha};function O(a,b,c){this.i=c;this.c=a;this.Yb=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.Zc=g("i");O.prototype.getRawDBInstance=O.prototype.Zc;O.prototype.$c=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.$c;function of(a){return new mf(a.i,1,new ld(a.c,B()))}O.prototype.qc=function(a){var b=of(this);kf(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.qc;
O.prototype.cc=function(a){var b=of(this);kf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function pf(a,b,c){var d=of(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.cc(b).then(function(a){a.forEach(function(a){a=c(a);kf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.nc=function(a,b,c){var d=Se(c);return pf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.rc=function(a,b){return pf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.rc;O.prototype.Hc=function(a,b,c){return pf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Hc;O.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Se(a[c]);return hc(b)};
O.prototype.createRow=O.prototype.vb;O.prototype.yc=g("Yb");O.prototype.getVersion=O.prototype.yc;function qf(a){kf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=of(this);qf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.cc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function rf(a,b,c){this.c=a;this.g=b;this.Ig=c||1}m=rf.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Ig);if(null!=c)this.i=c,sf(this,b).then(function(){this.ke().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function sf(a,b){var c=w(),d=new mf(a.i,1,new ld(a.c,B()));kf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);kf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Db=function(a,b,c){if(null!=this.i)return new mf(this.i,a,c);throw new D(2);};m.close=aa();
m.wc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Cc=function(){throw new D(355);};m.be=function(a,b){return tf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function tf(a){var b=a.g.oa(),c=new mf(a.i,1,new ld(a.c,B())),d=new mf(a.i,1,new ld(a.c,B()));kf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);qf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){kf(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],l=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Bb&&(a.Ca().forEach(function(a){a=nf(a.j());e.push(a);l.push(a)}),a=nf(cf(a)),e.push(a),p.push(a))});
e.forEach(function(a){kf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.ke=function(){var a=0,b=w(),c=function(b){var c=new mf(this.i,0);kf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});eb(d).then(function(){fc=Math.max(fc,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function uf(a){this.$=x();this.Xb=x();a.oa().forEach(function(a){this.Xb.set(a.getName(),B())},this)}m=uf.prototype;m.set=function(a,b){this.$.set(b.id(),b);this.Xb.get(a).add(b.id())};m.Ub=function(a,b){var c=this.Xb.get(a);b.forEach(function(a){this.$.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.$.get(a)||null};function vf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Sa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Xb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.$.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.$.get(b),d.push(c));return d};m.remove=function(a,b){this.$.delete(b);this.Xb.get(a).delete(b)};m.Sg=function(a){return null!=a?this.Xb.get(a).size:this.$.size};m.clear=function(){this.$.clear();this.Xb.clear()};function wf(a,b,c){var d=0,e=a.length;for(c=c||xf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function xf(a,b){return a-b}function yf(a,b,c){c=wf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function zf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Af(){this.ia=0;this.Bc=null}Af.prototype.add=function(a,b){this.ia+=b;this.Bc=null===this.Bc?a:a>this.Bc?a:this.Bc};Af.prototype.remove=function(a,b){this.ia-=b};Af.prototype.clear=function(){this.ia=0};function Bf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Cf(a,b,c,d){this.w=a;this.Z=b;this.tf=c;this.ya=new Af;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Df(this,d);this.ta=d=Ef(d)}else this.clear()}var Ff=[];m=Cf.prototype;m.getName=g("w");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.zb(a,b)};m.set=function(a,b){this.ta=this.ta.zb(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.Vc=function(a){if(null==a)return this.X().ia;if(a instanceof E){if(rd(a))return this.X().ia;if(vd(a))return this.get(a.from).length}return this.Sa([a]).length};m.X=g("ya");m.Qd=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.ya.ia-a-d:d,count:a,ne:0},c);return b?c.reverse():c};
m.Sa=function(a,b,c,d){var e=Gf(this.ta).a[0];if(!n(e)||0==c)return Ff;b=b||!1;c=null!=c?Math.min(c,this.ya.ia):this.ya.ia;d=d||0;var f=Math.min(Math.max(this.ya.ia-d,0),c);if(0==f)return Ff;if(!n(a)||1==a.length&&a[0]instanceof E&&rd(a[0]))return this.Qd(f,b,c,d);a=this.Z.pf(a);var h=Array(b?this.ya.ia:f),l={count:0,W:h.length,reverse:b,K:d},p=1<this.gb().Ud();a.forEach(function(a){for(var b=this.Z.pd(a),b=this.Z.Sd(a)?e:b[0],b=this.ta.Uf(b),c=0;null!=b&&l.count<l.W;){if(p){for(var d=b,f=a,L=l,yb=
h,Oc=d.o.gb(),fe=-1,Ka=0;Ka<d.a.length;++Ka)if(Oc.Ab(d.a[Ka],f)){fe=Ka;break}if(-1!=fe)for(Ka=fe;Ka<d.a.length&&L.count<L.W;++Ka)Oc.Ab(d.a[Ka],f)&&Hf(d,L,yb,Ka)}else b.Sa(a,l,h);0!=l.K||b.ed(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>l.count&&h.splice(l.count,h.length-l.count);return b?zf(h,b,c,d):h};m.clear=function(){this.ta=If(this);this.ya.clear()};m.hb=function(a){return this.ta.hb(a)};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
function Jf(a,b,c){if(!a.Z.Jd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.tf?[b.A[c]]:b.A[c]]}m.Fb=function(a){var b;a:{b=Gf(this.ta);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=Jf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Kf(this.ta);d=c.a.length-1;do if(0>d)c=c.ob,d=0;else{var e=Jf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.La=g("tf");m.gb=g("Z");
m.Oa=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ia=function(){for(var a=[],b=Gf(this.ta);b;)a.push(new ec(b.ra,[b.a,b.A])),b=b.xa;return a};function Lf(a,b,c,d){a=new Cf(b,a,c);d=Mf(d,a);a.ta=d;return a}function Nf(a,b){this.ra=a;this.o=b;this.kb=0;this.xa=this.ob=this.C=null;this.a=[];this.A=[];this.h=[];this.Uf=1==b.gb().Ud()?this.Ke:this.Je}function If(a){return new Nf(fc++,a)}function P(a){return 0==a.kb}m=Nf.prototype;m.next=g("xa");
function Of(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.A.join("/"),f=b(a.ob)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.C);a.xa&&(a=Of(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Of(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Gf(a){return P(a)?a:Gf(a.h[0])}function Kf(a){return P(a)?a:Kf(a.h[a.h.length-1])}
function Pf(a,b){b&&(b.ob=a);a&&(a.xa=b)}function Df(a,b){for(var c=b.length,d=0,e=a=If(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.A=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=If(a.o),Pf(a,f),a=f)}return e}function Qf(a){var b=a[0],c=If(b.o);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.a.push(a[b].a[0]);return c}
function Ef(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=Qf(c);else{var d=c.length,e=0,b=If(a.o);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Qf(f);h.C=b;b.h.length&&(b.a.push(f[0].a[0]),Pf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Rf(this,a);if(P(this)){var c=Ff;this.o.Oa(this.a[b],a)&&(c=c.concat(this.A[b]));return c}b=this.o.Oa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.hb=function(a){var b=Rf(this,a);return this.o.Oa(this.a[b],a)?!0:P(this)?!1:this.h[b].hb(a)};m.remove=function(a,b){Sf(this,a,-1,b);return null===this.C?(a=this,1==this.h.length&&(a=this.h[0],a.C=null),a):this};function Tf(a){return P(a)?a.a[0]:Tf(a.h[0])}function Uf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Tf(a.h[b]))}
function Sf(a,b,c,d){var e=Rf(a,b),f=P(a);if(!f){var h=a.o.Oa(a.a[e],b)?e+1:e;if(Sf(a.h[h],b,h,d))Uf(a);else return!1}else if(!a.o.Oa(a.a[e],b))return!1;if(a.a.length>e&&a.o.Oa(a.a[e],b)){if(n(d)&&!a.o.La()&&f&&(h=a.A[e],d=wf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.o.X().remove(b,1),a.A[e].length))return!1;a.a.splice(e,1);f&&(f=a.o.La()?1:a.A[e].length,a.A.splice(e,1),a.o.X().remove(b,f))}if(256>a.a.length&&null!==a.C){a:{if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.ob&&
256<a.ob.a.length)b=a.ob,d=a.ob.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.A:a.h;P(a)?h=b.A:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Uf(b),Uf(a));b=!0}b||Vf(a,c)}return!0}
function Vf(a,b){var c,d,e;a.xa&&511>a.xa.a.length?(c=a.xa,e=d=0):a.ob&&(c=a.ob,d=c.a.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);Pf(a.ob,a.xa);P(c)||Uf(c);-1!=b&&(a.C.a.splice(b,1),a.C.h.splice(b,1))}
m.zb=function(a,b,c){var d=Rf(this,a);if(P(this)){if(this.o.Oa(this.a[d],a)){if(c)this.o.X().remove(a,this.o.La()?1:this.A[d].length),this.A[d]=this.o.La()?b:[b];else{if(this.o.La())throw new D(201,this.o.getName(),JSON.stringify(a));if(!yf(this.A[d],b))throw new D(109);}this.o.X().add(a,1);return this}this.a.splice(d,0,a);this.A.splice(d,0,this.o.La()?b:[b]);this.o.X().add(a,1);512==this.a.length?(d=If(this.o),a=If(this.o),a.kb=1,a.a=[this.a[256]],a.h=[this,d],a.C=this.C,this.C=a,d.a=this.a.splice(256),
d.A=this.A.splice(256),d.C=a,Pf(d,this.xa),Pf(this,d),d=a):d=this;return d}d=this.o.Oa(this.a[d],a)?d+1:d;a=this.h[d].zb(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Xf(this):this};
function Xf(a){var b=If(a.o),c=If(a.o);b.C=a.C;b.kb=a.kb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.C=b;c.kb=a.kb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Pf(c,a.xa);Pf(a,c);return b}function Rf(a,b){for(var c=0,d=a.a.length,e=a.o.gb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Ke=function(a){if(!P(this)){var b=Rf(this,a);this.o.Oa(this.a[b],a)&&b++;return this.h[b].Ke(a)}return this};
m.Je=function(a){if(!P(this)){var b=Rf(this,a);this.o.Oa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Je(a)}return this};
m.Sa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.o.gb(),f=0,h=this.a.length-1,l=this.a,p=d(e.ub(l[f],a)),L=d(e.ub(l[h],a));if(1!=p&&(-1!=p||-1!=L)){var qa=function(a,b){b=a+b>>1;return b==a?b+1:b},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(l[b],a));if(0==h)return b;if(1==h)return-1;h=qa(b,c);if(h==c)return 0==f?c:-1;var p=d(e.ub(l[h],a));return 0==p?ba(b,h,p):-1==p?ba(h+1,c,f):ba(b+1,h,p)},xb=function(b,c){if(b>=c)return b;var f=d(e.ub(l[c],a));if(0==f)return c;
if(-1==f)return b;f=qa(b,c);if(f==c)return b;var h=d(e.ub(l[f],a));return 0==h?xb(f,c):1==h?xb(b,f-1):-1};0!=p&&(f=ba(f+1,h,L));-1!=f&&(h=xb(f,h),-1!=h&&h>=f&&Yf(this,b,c,f,h+1))}};function Hf(a,b,c,d){if(a.o.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Yf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Hf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.o.La()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--}else if(this.o.La())b[a.ne++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Mf(a,b){var c=b.X();a=a.map(function(a){var d=new Nf(a.id(),b);d.a=a.l[0];d.A=a.l[1];d.a.forEach(function(a,e){c.add(a,b.La()?1:d.A[e].length)});return d});for(var d=0;d<a.length-1;++d)Pf(a[d],a[d+1]);return 1<a.length?Ef(a[0]):a[0]}m.ed=function(a){return this.o.gb().ed(this.a[0],a)};function Zf(a){this.Tc=0==a?$f:ag;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?bg:cg}function ag(a,b){return a>b?1:a<b?-1:0}function $f(a,b){return ag(b,a)}function cg(a,b){return wd(a,b)}function bg(a,b){return wd(b,a)}m=Zf.prototype;m.ub=function(a,b){b=this.Xd(b);var c=[b.from==F,b.m==F];if(!c[0]){var d=this.Tc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Tc(a,b.m),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Tc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ab=function(a,b){a=this.ub(a,b);return a[0]&&a[1]};m.ed=function(a,b){return this.Ab(a,b)};m.pf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return this.Xd(a).from==F};m.pd=function(a){a=this.Xd(a);return[a.from,a.m]};m.Jd=function(a){return null!==a};m.Ud=k(1);
m.toString=function(){return this.compare==$f?"SimpleComparator_DESC":"SimpleComparator_ASC"};function dg(a){Zf.call(this,a);this.Tc=0==a?eg:fg}r(dg,Zf);function fg(a,b){return null===a?null===b?0:-1:null===b?1:ag(a,b)}function eg(a,b){return fg(b,a)}dg.prototype.Ab=function(a,b){return null===a?rd(b):dg.eb.Ab.call(this,a,b)};dg.prototype.Fb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};dg.prototype.min=function(a,b){var c=this.Fb(a,b);null===c&&(c=dg.eb.min.call(this,a,b));return c};
dg.prototype.max=function(a,b){var c=this.Fb(a,b);null===c&&(c=dg.eb.max.call(this,a,b));return c};function gg(a){this.pa=a.map(function(a){return new Zf(a)})}function hg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=gg.prototype;m.compare=function(a,b){return hg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return hg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return hg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ab=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Ab(a[d],b[d]);return c};m.ed=function(a,b){return this.pa[0].Ab(a[0],b[0])};
m.pf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].ce(a[d],b[d]);return c}.bind(this))};m.Sd=function(a){return this.pa[0].Sd(a[0])};
m.pd=function(a){var b=a.map(function(a,b){return this.pa[b].pd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].pd(a)[1]},this);return[b,a]};m.Jd=function(a){return a.every(function(a,c){return this.pa[c].Jd(a)},this)};m.Ud=function(){return this.pa.length};function ig(a){gg.call(this,a);this.pa=a.map(function(a){return new dg(a)})}r(ig,gg);function jg(a){if(1==a.f.length)return new Zf(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.ba.fc()})?new ig(b):new gg(b)};function kg(a){this.fa=a;this.mb=B();this.Kc=new Af;this.ya=new Af}m=kg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.mb.add(b),this.Kc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.mb.clear(),this.Kc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Kc.remove(a,1)):(this.mb.clear(),this.Kc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.mb):this.fa.get(a)};m.Vc=function(a){return this.fa.Vc(a)};
m.X=function(){Bf(this.ya,[this.fa.X(),this.Kc]);return this.ya};m.Sa=function(a,b,c,d){b=this.fa.Sa(a,b,c,d);return null!=a?b:b.concat(C(this.mb))};m.clear=function(){this.mb.clear();this.fa.clear()};m.hb=function(a){return null===a?0!=this.mb.size:this.fa.hb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new ec(-2,C(this.mb))].concat(this.fa.Ia())};m.gb=function(){return this.fa.gb()};
function lg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new kg(a);d.forEach(function(a){e.mb.add(a)});return e}m.La=function(){return this.fa.La()};function mg(a){this.w=a;this.qb=B();this.Z=new Zf(1)}m=mg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.hb(a)?[a]:[]};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
m.Fb=function(a){if(0==this.qb.size)return null;var b=C(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Vc=function(){return this.qb.size};m.Sa=function(a,b,c,d){var e=a||[ud()];a=C(this.qb).filter(function(a){return e.some(function(b){return this.Z.Ab(a,b)},this)},this);return zf(a,b,c,d)};m.clear=function(){this.qb.clear()};m.hb=function(a){return this.qb.has(a)};m.Ia=function(){return[new ec(0,C(this.qb))]};m.gb=g("Z");
function ng(a,b){var c=new mg(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.La=k(!0);m.X=function(){var a=new Af;a.ia=this.qb.size;return a};function og(a){this.Na=a.b(sc);this.B=a.b(uc);this.U=a.b(tc)}og.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Bb()?pg(this,a):qg(this,a)).then(c)}.bind(this);return c()};function qg(a,b){var c=a.Na.Db(0,[b]);a=c.H(b.getName(),b.ib.bind(b),0).get([]).then(function(a){this.U.Ub(b.getName(),a);rg(this,b,a)}.bind(a));c.ka();return a}
function rg(a,b,c){var d=a.B.jc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})})}function pg(a,b){var c=a.Na.Db(0,[b]),d=c.H(b.getName(),b.ib,0).get([]).then(function(a){this.U.Ub(b.getName(),a)}.bind(a));a=b.Ca().map(function(a){return sg(this,a,c)},a).concat(tg(a,b,c));c.ka();return eb(a.concat(d))}
function sg(a,b,c){c=c.H(b.j(),gc,1);var d=jg(b);return c.get([]).then(function(a){if(0<a.length){if(ug(b)){var c=Lf.bind(void 0,d,b.j(),b.zc);a=lg(c,a)}else a=Lf(d,b.j(),b.zc,a);this.B.set(b.kc,a)}}.bind(a))}function tg(a,b,c){return c.H(cf(b),gc,1).get([]).then(function(a){0<a.length&&(a=ng(cf(b),a),this.B.set(b.getName(),a))}.bind(a))};function vg(){this.Y=x();this.jc=x()}vg.prototype.Da=function(a){a.oa().forEach(function(a){var b=[];this.jc.set(a.getName(),b);var d=cf(a);if(null===this.get(d)){var e=new mg(d);b.push(e);this.Y.set(d,e)}a.Ca().forEach(function(a){var c;c=jg(a);c=new Cf(a.j(),c,a.zc);c=ug(a)&&1==a.f.length?new kg(c):c;b.push(c);this.Y.set(a.j(),c)},this)},this);return v()};vg.prototype.get=function(a){return this.Y.get(a)||null};
vg.prototype.set=function(a,b){var c=this.jc.get(a)||null;null===c&&(c=[],this.jc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Y.set(b.getName(),b)};function wg(a,b){var c=[],d=null,e=null;de(a,function(a){var f=b(a);null==a.getParent()?e=f:K(d,f);var l=a.getParent();null!==l&&J(l).length==J(d).length&&(l=c.indexOf(d),-1!=l&&c.splice(l,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function xg(a){return yg(a,function(a){return null===a.h})}
function zg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||ae(b,d,c+f)});return{parent:b,children:d}}function Ag(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function Bg(a){var b=$d(a,0);zg(a);Ag(b,a);return b}
function Cg(a,b,c){var d=$d(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;zg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);be(d,h);K(f,e);ae(d,f,h)}});return d}function Dg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),be(e,a),ae(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function yg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Eg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";de(a,function(a){for(var b=0;b<Zd(a);b++)d+="-";d+=c(a)});return d};function Fg(a){ee.call(this);this.nb=a;this.Ta=!1}r(Fg,ee);m=Fg.prototype;m.Lb=function(){return wg(this,function(a){if(a instanceof Fg){var b=new Fg(a.nb);b.Ta=a.Ta;a=a.V();b.ra=a;return b}return a.Lb()})};m.jb=function(a){var b=a||[];de(this,function(a){a!=this&&a.jb(b)}.bind(this));a=B(b);return C(a)};m.s=function(a){var b=null!=a?a:B();de(this,function(a){a!=this&&a.s(b)}.bind(this));return b};m.qd=function(a){this.Ta!=a&&(this.Ta=a,this.nb="and"==this.nb?"or":"and",J(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Gg(this,b)};function Gg(a,b){return"and"==a.nb?Fd(b):Gd(b)}m.toString=function(){return"combined_pred_"+this.nb.toString()};m.qe=function(){if("or"==this.nb){var a=new yd;J(this).forEach(function(b){b=b.qe().yb();a.add(b)});return a}return new yd};m.fd=function(){return"or"==this.nb?Hg(this):!1};
function Hg(a){var b=null;return J(a).every(function(a){if(!(a instanceof he&&a.fd()))return!1;null===b&&(b=a.I);return b.j()==a.I.j()})};function Ig(a,b,c){ee.call(this);this.ga=a;this.ma=b;this.D=c;this.Yd=null;a=Wd();this.sc=Xd(a,this.ga.F(),this.D);this.kg=a.Ue.get(this.ga.F())||null}r(Ig,ee);m=Ig.prototype;m.Lb=function(){var a=new Ig(this.ga,this.ma,this.D),b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.s=function(a){a=null!=a?a:B();a.add(this.ga.H());a.add(this.ma.H());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Ig(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.sc(b,a)},this);return new G(b,a.s())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.D+" "+this.ma.j()+")"};
function Jg(a,b,c){var d;-1!=b.s().indexOf(Kd(a.ga.H()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.sc=Xd(Wd(),a.ga.F(),a.D)}return[b,d]}return[d,b]}function Kg(a){var b={};a.jb().forEach(function(a){b[a.getName()]=null});return b}
function Lg(a,b,c){null===a.Yd&&(a.Yd=Kg(a.ma.H()));var d=new Id(new ec(-1,a.Yd),!1);return Md(b,c,d,[Kd(a.ma.H())])}
function Mg(a,b,c,d){var e=[b,c];d||(e=Jg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,l=a.ma;d&&(e=c,f=b,h=a.ma,l=a.ga);var p=new Uc,L=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var qa=e.s(),ba=f.s();f.entries.forEach(function(a){var b=H(a,l),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Md(a,ba,b,qa);L.push(b)}):d&&L.push(Lg(this,a,ba))}.bind(a));a=b.s().concat(c.s());return new G(L,a)}
function Ng(a,b,c,d,e){function f(a,b){b=new Id(b,1<qa.length);a=Md(a,ba,b,qa);L.push(a)}var h=d.$f.H(),l=b,p=c;-1!=b.s().indexOf(Kd(h))&&(l=c,p=b);var L=[],qa=p.s(),ba=l.s();l.entries.forEach(function(a){var b=this.kg(H(a,d.sg)),b=d.index.get(b);0!=b.length&&(d.index.La()?f(a,e.get(b[0])):vf(e,b).forEach(f.bind(null,a)))},a);a=l.s().concat(p.s());return new G(L,a)};function Og(a,b,c){return null===b?new he(a,b,c):n(b.j)?new Ig(a,b,c):new he(a,b,c)};var Pg={};q("lf.schema.DataStoreType",Pg);Pg.INDEXED_DB=0;Pg.MEMORY=1;Pg.LOCAL_STORAGE=2;Pg.FIREBASE=3;Pg.WEB_SQL=4;Pg.OBSERVABLE_STORE=5;function Qg(a,b,c,d){this.kc=a;this.name=b;this.zc=c;this.f=d}Qg.prototype.j=function(){return this.kc+"."+this.name};function ug(a){return a.f.some(function(a){return a.ba.fc()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.md=d;this.Ja=null}q("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;
function Kd(a){return a.Ja||a.w}Q.prototype.oc=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Eg=this.Eg;return b};Q.prototype.as=Q.prototype.oc;Q.prototype.createRow=Q.prototype.vb;Q.prototype.deserializeRow=Q.prototype.ib;Q.prototype.Ca=g("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.jb=g("J");Q.prototype.getColumns=Q.prototype.jb;Q.prototype.getConstraint=Q.prototype.Ie;Q.prototype.Bb=g("md");Q.prototype.persistentIndex=Q.prototype.Bb;function cf(a){return a.w+".#"};function R(a,b){this.child=a;this.Jb=b;this.Ja=null}m=R.prototype;m.getName=function(){return this.Jb+"("+this.child.getName()+")"};m.j=function(){return this.Jb+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.F=function(){return this.child.F()};m.Ca=function(){return[]};m.Ba=k(null);m.fc=k(!1);m.oc=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.oc;
function Rg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Sg(a){this.Ja=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Sg.prototype;m.getName=k("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("S");m.F=k(4);m.Ca=function(){return[]};m.Ba=k(null);m.fc=k(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Tg(a){return new R(a||new Sg,"COUNT")}q("lf.fn.count",Tg);function Ug(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Ug);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Qf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Qf){case 1:return Vg(this,a,b);case 0:return Wg(this,a,b);default:return Xg(this,a,b)}};S.prototype.toString=k("dummy_node");S.prototype.Lc=function(){return this.toString()};function Xg(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function Vg(a,b,c){return $d(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Wg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function Yg(a){S.call(this,0,1);this.xe=a}r(Yg,S);Yg.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.j()}).toString()+")"};Yg.prototype.ca=function(a){a.forEach(function(a){Zg(new $g(a,this.xe))},this);return a};function $g(a,b){this.Ma=a;this.J=b}
function Zg(a){a.J.forEach(function(a){a=Rg(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Rg(d).slice(-1)[0],f=d.child instanceof R?Cd(this.Ma,d.child):this.Ma;if(null!==f.Xa&&f.Xa.has(d.j()))break;f=ah(d.Jb,f,e);e=this.Ma;null===e.Xa&&(e.Xa=x());e.Xa.set(d.j(),f)}},a)}
function ah(a,b,c){var d=null;switch(a){case "MIN":d=bh(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=bh(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ch(b,c);break;case "COUNT":d=dh(b,c);break;case "SUM":d=eh(b,c);break;case "AVG":a=dh(b,c);0<a&&(d=eh(b,c)/a);break;case "GEOMEAN":d=fh(b,c);break;default:d=gh(b,c)}return d}function bh(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function dh(a,b){return b instanceof Sg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function eh(a,b){return bh(a,b,function(a,b){return b+a})}function gh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:tb.apply(null,c)}function fh(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function ch(a,b){var c=x();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(y(c),a.s())};function hh(a,b){this.Ga=a;this.aa=b}hh.prototype.Za=g("Ga");hh.prototype.da=g("aa");function ih(){I.call(this)}r(ih,I);function jh(a,b){I.call(this);this.table=a;this.values=b}r(jh,ih);function kh(a,b){jh.call(this,a,b)}r(kh,jh);function lh(a){I.call(this);this.table=a}r(lh,ih);lh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function mh(a){I.call(this);this.table=a}r(mh,ih);mh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function nh(a){I.call(this);this.N=a}r(nh,ih);nh.prototype.toString=function(){return"select("+this.N.toString()+")"};function oh(a){I.call(this);this.table=a}r(oh,ih);oh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function ph(){I.call(this)}r(ph,ih);ph.prototype.toString=k("cross_product");function qh(a,b){I.call(this);this.f=a;this.Nb=b}r(qh,ih);
qh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function rh(a){I.call(this);this.M=a}r(rh,ih);rh.prototype.toString=function(){return"order_by("+re(this.M)+")"};function sh(a){I.call(this);this.f=a}r(sh,ih);sh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function th(a){I.call(this);this.f=a}r(th,ih);
th.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function uh(a){I.call(this);this.W=a}r(uh,ih);uh.prototype.toString=function(){return"limit("+this.W+")"};function vh(a){I.call(this);this.K=a}r(vh,ih);vh.prototype.toString=function(){return"skip("+this.K+")"};function wh(a,b){I.call(this);this.N=a;this.Pb=b}r(wh,ih);wh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.N.toString()+")"};function xh(){};function yh(){}r(yh,xh);yh.prototype.cb=function(a){this.G=a;this.sb(this.G);return this.G};yh.prototype.sb=function(a){if(a instanceof nh){var b=zh(this,a.N),b=Ah(this,b);Dg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}J(a).forEach(function(a){this.sb(a)},this)};function zh(a,b){if(0==J(b).length||"and"!=b.nb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return zh(this,a)},a);return Ea(a)}
function Ah(a,b){var c=null,d=null;b.map(function(a,b){a=new nh(a);0==b?c=a:K(d,a);d=a},a);return[c,d]};function Bh(){}r(Bh,xh);Bh.prototype.cb=function(a,b){if(3>b.from.length)return a;this.G=a;this.sb(this.G);return this.G};Bh.prototype.sb=function(a){if(a instanceof ph)for(;2<J(a).length;){for(var b=new ph,c=0;2>c;c++){var d=be(a,0);K(b,d)}ae(a,b,0)}J(a).forEach(function(a){this.sb(a)},this)};function Ch(){S.call(this,0,0)}r(Ch,S);Ch.prototype.toString=k("cross_product");Ch.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.s(),e=c.s(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var l=Md(b.entries[f],d,c.entries[h],e);a.push(l)}b=b.s().concat(c.s());return[new G(a,b)]};function Dh(a,b){ue.call(this,a,b);this.Ha=a.b(wc);this.Gb=a.b(xc)}r(Dh,ue);Dh.prototype.getPriority=k(2);Dh.prototype.ae=function(a){0==this.F()?Eh(this,a):this.Ic()};function Eh(a,b){a.od.forEach(function(a,d){a instanceof qe&&xe(this.Gb,a,b[d])},a)}Dh.prototype.Ic=function(){var a=ze(this.Gb,this.da());0!=a.length&&(a=new we(this.global,a),Ae(this.Ha,a))};function Fh(a){le.call(this,a)}r(Fh,le);Fh.prototype.da=function(){var a=B();a.add(this.from);Gh(this,this.from.getName(),a);return a};function Gh(a,b,c){var d=Hh(a.ba.info(),b,1);Hh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Gh(this,a.getName(),c)},a)}Fh.prototype.clone=function(){var a=new Fh(this.ba);oe(a,this);a.from=this.from;return a};Fh.prototype.bind=function(a){Fh.eb.bind.call(this,a);pe(this,a);return this};function Ih(a){le.call(this,a)}r(Ih,le);Ih.prototype.da=function(){var a=B();a.add(this.Ka);var b=this.ba.info();Jh(this.Ka.getName(),b.bf).forEach(a.add.bind(a));this.Zb&&Hh(b,this.Ka.getName()).forEach(a.add.bind(a));return a};Ih.prototype.clone=function(){var a=new Ih(this.ba);oe(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Nd?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
Ih.prototype.bind=function(a){Ih.eb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof Nd?a[this.$b.Ba()]:this.$b.map(function(b){return b instanceof Nd?a[b.Ba()]:b}));return this};function Kh(a){le.call(this,a)}r(Kh,le);Kh.prototype.da=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.j()}),c=this.ba.info();Lh(c,b).forEach(a.add.bind(a));Mh(c,b).forEach(a.add.bind(a));return a};Kh.prototype.clone=function(){var a=new Kh(this.ba);oe(a,this);a.table=this.table;a.set=this.set?Nh(this.set):this.set;return a};Kh.prototype.bind=function(a){Kh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Pc&&(b.value=a[b.Pc])});pe(this,a);return this};
function Nh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Oh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ic(b)+"'";default:return"'"+b.toString()+"'"}}function Ph(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Ka.jb(),c=c+(" INTO "+a.Ka.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Oh(c.F(),d)});return c+e.join(", ")+");"}).join("\n")}
function Qh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Rh(a,b,c,d){return a instanceof Nd?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Oh(c,a)}).join(", ")+")":"between"==b?Oh(c,a[0])+" AND "+Oh(c,a[1]):Oh(c,a).toString()}
function Sh(a,b){return J(a).map(function(a){return"("+Th(a,b)+")"}).join("and"==a.nb?" AND ":" OR ")}function Uh(a){return[a.ga.j(),Qh(a.D),a.ma.j()].join(" ")}function Th(a,b){if(a instanceof he){var c=a.I.j(),d=Qh(a.D);a=Rh(a.value,a.D,a.I.F(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Fg)return Sh(a,b);if(a instanceof Ig)return Uh(a);throw new D(357,typeof a);}
function Vh(a,b){return(a=Th(a,b))?" WHERE "+a:""}function Wh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.I.j()+" = ";return-1!=a.Pc?b+"?"+a.Pc.toString():b+Oh(a.I.F(),a.value).toString()}).join(", ");a.u&&(c+=Vh(a.u,b));return c+";"}
function Xh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ja?a.j()+" AS "+a.Ja:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.ab&&0!=a.ab.size?c+=Yh(a,b):(c+=a.from.map(Zh).join(", "),a.u&&(c+=Vh(a.u,b)));a.M&&(b=a.M.map(function(a){return a.I.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Zh(a){return Kd(a)!=a.getName()?a.getName()+" AS "+Kd(a):a.getName()}function Yh(a,b){for(var c=yg(a.u,function(a){return a instanceof Ig}),d=c.map(Uh),e=Zh(a.from[0]),f=1;f<a.from.length;f++)var h=Zh(a.from[f]),e=a.ab.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=a.u;a=0<J(a).length?$d(a,0):a;a instanceof Ig||(e+=" WHERE "+Th(a,b));return e}
function $h(a,b){b=b||!1;a=a.query.clone();if(a instanceof Ih)return Ph(a,b);if(a instanceof Fh){var c="DELETE FROM "+a.from.getName();a.u&&(c+=Vh(a.u,b));return c+";"}if(a instanceof Kh)return Wh(a,b);if(a instanceof qe)return Xh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Dg=a.b(vc);this.Ha=a.b(wc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Ya()}catch(a){return bb(a)}return new u(function(a,b){var c=new Dh(this.global,[this.xc()]);Ae(this.Ha,c).then(function(b){a(Ad(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Sf=function(){var a=function(a){return a.Lc(this.query)+"\n"}.bind(this);return Eg(ai(this).Za(),a)};T.prototype.explain=T.prototype.Sf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Lg=function(a){return $h(this,a)};T.prototype.toSql=T.prototype.Lg;T.prototype.Ya=aa();function ai(a){if(null==a.cf){var b;b=a.Dg;var c=a.query,d=b.og.create(c);b=b.Ag.create(d,c);a.cf=b}return a.cf}T.prototype.xc=function(){return{context:this.query.clone(),de:ai(this)}};function bi(a){T.call(this,a,new Fh(a.b(A)))}r(bi,T);q("lf.query.DeleteBuilder",bi);bi.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};bi.prototype.from=bi.prototype.from;bi.prototype.u=function(a){this.Ad();this.query.u=a;return this};bi.prototype.where=bi.prototype.u;bi.prototype.Ad=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.u)throw new D(516);};
bi.prototype.Ya=function(){bi.eb.Ya.call(this);if(null==this.query.from)throw new D(517);};function ci(a,b){T.call(this,a,new Ih(a.b(A)));this.query.Zb=b||!1}r(ci,T);q("lf.query.InsertBuilder",ci);ci.prototype.Ya=function(){ci.eb.Ya.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new D(518);if(a.Zb&&null===a.Ka.Kb.nd)throw new D(519);};ci.prototype.Ka=function(a){if(null!=this.query.Ka)throw new D(520);this.query.Ka=a;return this};ci.prototype.into=ci.prototype.Ka;
ci.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Nd||a.some(function(a){return a instanceof Nd})?this.query.$b=a:this.query.values=a;return this};ci.prototype.values=ci.prototype.values;function di(a){return ei("and",Array.prototype.slice.call(arguments))}q("lf.op.and",di);q("lf.op.or",function(a){return ei("or",Array.prototype.slice.call(arguments))});function ei(a,b){var c=new Fg(a);b.forEach(function(a){K(c,a)});return c}q("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new qe(a.b(A)));this.He=this.vd=!1;this.query.f=b;fi(this);gi(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.Ya=function(){U.eb.Ya.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Qb)&&!n(a.W)||n(a.Wb)&&!n(a.K))throw new D(523);null!=this.query.qa?hi(this):ii(this)};function fi(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function hi(a){if(a.query.qa.some(function(a){a=a.F();return 6==a||0==a}))throw new D(525);}function ii(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function gi(a){a.query.f.forEach(function(a){if(a instanceof R&&!ji(a.Jb,a.F()))throw new D(527,a.j());},a)}function ki(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.He)throw new D(515);this.He=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){ki(this,548);if(this.vd)throw new D(516);this.vd=!0;li(this,a);return this};U.prototype.where=U.prototype.u;function li(a,b){null!=a.query.u&&(b=di(b,a.query.u));a.query.u=b}
U.prototype.dg=function(a,b){ki(this,542);if(this.vd)throw new D(547);this.query.from.push(a);li(this,b);return this};U.prototype.innerJoin=U.prototype.dg;U.prototype.lg=function(a,b){ki(this,542);if(!(b instanceof Ig))throw new D(541);if(this.vd)throw new D(547);this.query.from.push(a);null==this.query.ab&&(this.query.ab=B());var c=b;Kd(a)!=Kd(b.ma.H())&&(c=b.reverse());this.query.ab.add(c.V());li(this,c);return this};U.prototype.leftOuterJoin=U.prototype.lg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Qb))throw new D(528);if(a instanceof Nd)this.query.Qb=a;else{if(0>a)throw new D(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Wb))throw new D(529);if(a instanceof Nd)this.query.Wb=a;else{if(0>a)throw new D(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){ki(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){ki(this,549);if(null!=this.query.qa)throw new D(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function ji(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Sc=null;return a};U.prototype.clone=U.prototype.clone;function mi(a,b){T.call(this,a,new Kh(a.b(A)));this.query.table=b}r(mi,T);q("lf.query.UpdateBuilder",mi);mi.prototype.set=function(a,b){a={Pc:b instanceof Nd?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};mi.prototype.set=mi.prototype.set;mi.prototype.u=function(a){this.Ad();this.query.u=a;return this};mi.prototype.where=mi.prototype.u;mi.prototype.Ad=function(){if(null!=this.query.u)throw new D(516);};
mi.prototype.Ya=function(){mi.eb.Ya.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Nd}))throw new D(501);};function ni(a){this.query=a;this.Ga=null}ni.prototype.ec=function(){null===this.Ga&&(this.Ga=this.Xc());return this.Ga};function oi(a){ni.call(this,a)}r(oi,ni);oi.prototype.Xc=function(){return this.query.Zb?new kh(this.query.Ka,this.query.values):new jh(this.query.Ka,this.query.values)};function pi(a){ni.call(this,a)}r(pi,ni);pi.prototype.Xc=function(){var a=new mh(this.query.table),b=null!=this.query.u?new nh(this.query.u.Lb()):null,c=new oh(this.query.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function qi(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}qi.prototype.ec=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function ri(a,b){ni.call(this,a);this.Tb=b}r(ri,ni);ri.prototype.Xc=function(){var a=new lh(this.query.from),b=null!=this.query.u?new nh(this.query.u.Lb()):null,c=new oh(this.query.from);null===b?K(a,c):(K(b,c),K(a,b));return(new qi(a,this.query,this.Tb)).ec()};function si(){}r(si,xh);si.prototype.cb=function(a,b){if(2>b.from.length)return a;this.G=a;this.sb(this.G,b);return this.G};si.prototype.sb=function(a,b){if(a instanceof nh&&a.N instanceof Ig){var c=a.N.V(),d=$d(a,0);d instanceof ph&&(c=null!=b.ab&&b.ab.has(c),c=new wh(a.N,c),Dg(a,d,c,c),a==this.G&&(this.G=c),a=c)}J(a).forEach(function(a){this.sb(a,b)},this)};function ti(){this.Oc=B()}r(ti,xh);ti.prototype.cb=function(a,b){if(!n(b.u))return a;this.Oc.clear();this.G=a;this.sb(this.G,b);this.Oc.clear();return this.G};ti.prototype.sb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Oc.has(a)){if(a instanceof nh){var e=a.N.s(),h=function(a){return ui(this,a,e)}.bind(this),h=vi(this,b,a,h);this.Oc.add(a);h!=a&&(null===h.getParent()&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function vi(a,b,c,d){var e=c;if(wi(b,c))e=Bg(c),vi(a,b,c,d);else if(xi(c)){var f=[],e=Cg(c,d,function(a){a=new nh(a.N);f.push(a);return a});f.forEach(function(a){vi(this,b,a,d)},a)}return e}function ui(a,b,c){var d=B();xg(b).forEach(function(a){d.add(a.table)},a);b instanceof oh&&d.add(b.table);return yc(d,c)}function xi(a){a=$d(a,0);return a instanceof ph||a instanceof wh}
function wi(a,b){var c=$d(b,0);if(!(c instanceof nh))return!1;if(null==a.ab)return!0;b=b.N instanceof Ig;a=a.ab.has(c.N.V());return b||!a};function yi(a,b){ni.call(this,a);this.Tb=b;this.ef=this.Ye=this.nf=this.af=this.ye=this.Ne=this.mf=this.Ee=this.qf=null}r(yi,ni);
yi.prototype.Xc=function(){zi(this);2<=this.query.from.length&&(this.Ee=new ph);this.mf=null!=this.query.u?new nh(this.query.u.Lb()):null;this.query.M&&(this.af=new rh(this.query.M));null!=this.query.K&&0<this.query.K&&(this.nf=new vh(this.query.K));null!=this.query.W&&(this.Ye=new uh(this.query.W));null!=this.query.qa&&(this.Ne=new th(this.query.qa));Ai(this);this.ef=new qh(this.query.f||[],this.query.qa||null);var a=Bi(this);return(new qi(a,this.query,this.Tb)).ec()};
function Bi(a){for(var b=[a.Ye,a.nf,a.ef,a.af,a.ye,a.Ne,a.mf,a.Ee],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.qf.forEach(function(a){K(b[c],a)});return d}function zi(a){a.qf=a.query.from.map(function(a){return new oh(a)},a)}function Ai(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.M&&a.query.M.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.ye=new sh(b))};function Ci(){this.le=[new yh,new Bh,new ti,new si];this.Kd=[new yh]}Ci.prototype.create=function(a){var b;if(a instanceof Ih)b=new oi(a);else if(a instanceof Fh)b=new ri(a,this.Kd);else if(a instanceof qe)b=new yi(a,this.le);else if(a instanceof Kh)b=new pi(a);else throw new D(513);b=b.ec();return new hh(b,a.da())};function Di(a){S.call(this,0,1);this.S=a}r(Di,S);Di.prototype.toString=function(){return"delete("+this.S.getName()+")"};Di.prototype.ca=function(a,b){a=a[0].entries.map(function(a){return a.ua});b.remove(this.S,a);return[Ed()]};function Ei(a,b){S.call(this,0,-1);this.table=b;this.B=a.b(uc)}r(Ei,S);Ei.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Ei.prototype.ca=function(){var a=this.B.get(cf(this.table)),b=new G([],[this.table.getName()]),c=Tg(),a=a.X().ia;null===b.Xa&&(b.Xa=x());b.Xa.set(c.j(),a);return[b]};function Fi(a,b){S.call(this,0,-1);this.U=a.b(tc);this.B=a.b(uc);this.table=b}r(Fi,S);Fi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};Fi.prototype.ca=function(){var a=this.B.get(cf(this.table)).Sa();return[Hd(vf(this.U,a),[Kd(this.table)])]};function Gi(a){this.c=a}r(Gi,xh);Gi.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;a=yg(a,function(a){return a instanceof Fi})[0];b=new Ei(this.c,a.table);Dg(a,a,b,b);return this.G};Gi.prototype.Cd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Jb&&a.child instanceof Sg):!1};function Hi(a){S.call(this,0,1);this.Me=a}r(Hi,S);Hi.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.j()}).toString()+")"};Hi.prototype.ca=function(a){return Ii(this,a[0])};function Ii(a,b){var c=new Uc,d=function(a){return this.Me.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.s())},a)};function Ji(a,b,c){S.call(this,0,0);this.B=a.b(uc);this.U=a.b(tc);this.N=b;this.Pb=c;this.yd="eq"==this.N.D?0:2;this.Pe=null}r(Ji,S);var Ki=["hash","index_nested_loop","nested_loop"];Ji.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+Ki[this.yd]+", "+this.N.toString()+")"};
Ji.prototype.ca=function(a){switch(this.yd){case 0:return[Mg(this.N,a[0],a[1],this.Pb)];case 1:return[Ng(this.N,a[0],a[1],this.Pe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=Jg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.s(),h=a.s(),l=c.entries.length,p=a.entries.length,L=p+256-1>>8,qa=0;qa<L;){for(var ba=0;ba<l;ba++){var xb=!1,Wf=H(c.entries[ba],b.ga);if(null!==Wf)for(var Mi=Math.min(qa+1<<8,p),yb=qa<<8;yb<Mi;yb++)if(b.sc(Wf,H(a.entries[yb],b.ma))){var xb=!0,Oc=Md(c.entries[ba],
f,a.entries[yb],h);e.push(Oc)}d&&!xb&&e.push(Lg(b,c.entries[ba],f))}qa++}b=c.s().concat(a.s());return[new G(e,b)]}};function Li(a,b){a.yd=1;var c=a.B.get(b.Ba().j());a.Pe={$f:b,sg:b==a.N.ga?a.N.ma:a.N.ga,index:c}};function Ni(a){S.call(this,0,-1);this.ff=a}r(Ni,S);Ni.prototype.toString=function(){return"no_op_step("+this.ff[0].s().join(",")+")"};Ni.prototype.ca=g("ff");function Oi(){}r(Oi,xh);Oi.prototype.cb=function(a,b){this.G=a;if(!this.Cd(b))return a;yg(a,function(a){return a instanceof Ji}).forEach(this.Cg,this);return this.G};Oi.prototype.Cd=function(a){return 1<a.from.length};
Oi.prototype.Cg=function(a){if("eq"==a.N.D&&!a.Pb){var b=function(b){if(!(b instanceof Fi))return null;b=Kd(b.table)==Kd(a.N.ma.H())?a.N.ma:a.N.ga;return null===b.Ba()?null:b},c=b($d(a,0)),b=b($d(a,1));if(null!==c||null!==b){b=null===b?c:b;Li(a,b);var d=new G([],[Kd(b.H())]);ce(a,new Ni([d]),b==c?0:1)}}};function Pi(a){a=a.map(function(a){return a.yb()});a=Ab.apply(null,a);var b=[];zb(a,function(a){b.push(a)});return b}function Qi(a){this.Ob=a}Qi.prototype.Yc=function(){return 1==this.Ob.f.length?[ud()]:[this.Ob.f.map(function(){return ud()})]};function Ri(a,b){this.Ob=a;this.Fa=b;this.Gd=this.We=null}
function Si(a,b){var c=x();a.Fa.keys().forEach(function(a){var d=this.Fa.get(a).map(function(a){return me(b,a)},this),f=new yd([ud()]);d.forEach(function(a){f=zd(f,a.qe())});c.set(a,f)},a);return c}Ri.prototype.Yc=function(a){if(this.We==a)return this.Gd;for(var b=Si(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new yd([ud()]))}this.Gd=1==this.Ob.f.length?y(b)[0].yb():Pi(Ti(this,b));this.We=a;return this.Gd};
function Ti(a,b){var c=x(),d=0;a.Ob.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return dc(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ui(a,b){this.sd=b;this.B=a.b(uc)}function Vi(a){a=a.B.get(cf(a.sd));return Math.floor(.02*a.X().ia)}function Wi(a,b,c){c=c.filter(a.gg,a);if(0==c.length)return null;a=Xi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Yi(c,b);return e<d?(d=e,c):a},null)}
function Xi(a,b){return a.sd.Ca().map(function(a){a=new Zi(this.B,a);$i(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,c=!0,f=0;f<a.$a.f.length;f++){var h=a.Fa.has(a.$a.f[f].ba.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Ui.prototype.gg=function(a){return a instanceof he?!a.fd()||a.I.H()!=this.sd||"in"==a.D&&a.value.length>Vi(this)?!1:!0:a instanceof Fg?a.fd()&&$d(a,0).I.H()==this.sd?J(a).length<=Vi(this):!1:!1};
function Zi(a,b){this.B=a;this.$a=b;this.ag=B(this.$a.f.map(function(a){return a.ba.getName()}));this.Vd=this.Fa=null}function aj(a){null===a.Vd&&(a.Vd=new Ri(a.$a,a.Fa));return a.Vd}function $i(a,b){b.forEach(function(a){var b=a.jb()[0].getName();this.ag.has(b)&&(null===this.Fa&&(this.Fa=new Uc),this.Fa.set(b,a.V()))},a)}function Yi(a,b){b=aj(a).Yc(b);var c=a.B.get(a.$a.j());return b.reduce(function(a,b){return a+c.Vc(b)},0)};function bj(a,b,c,d){S.call(this,0,-1);this.B=a.b(uc);this.index=b;this.Ve=c;this.je=d;this.Nc=this.Mc=!1}r(bj,S);bj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.je?"reverse":"natural")+(this.Mc?", limit:?":"")+(this.Nc?", skip:?":"")+")"};bj.prototype.Lc=function(a){var b=this.toString(),c=this.Ve.Yc(a),b=b.replace("?",c.toString());this.Mc&&(b=b.replace("?",a.W.toString()));this.Nc&&(b=b.replace("?",a.K.toString()));return b};
bj.prototype.ca=function(a,b,c){a=this.Ve.Yc(c);b=this.B.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&vd(a[0])?zf(b.get(a[0].from),!1,this.Mc?c.W:void 0,this.Nc?c.K:void 0):b.Sa(a,this.je,this.Mc?c.W:void 0,this.Nc?c.K:void 0)).map(function(a){return new ec(a,{})},this);return[Hd(c,[this.index.kc])]};function cj(){S.call(this,0,0)}r(cj,S);cj.prototype.toString=k("multi_index_range_scan()");
cj.prototype.ca=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=y(b);return[new G(c,a[0].s())]};function dj(a){S.call(this,0,1);this.hc=a}r(dj,S);dj.prototype.toString=k("select(?)");dj.prototype.Lc=function(a){a=me(a,this.hc);return this.toString().replace("?",a.toString())};dj.prototype.ca=function(a,b,c){return[me(c,this.hc).eval(a[0])]};function ej(a,b){S.call(this,0,1);this.U=a.b(tc);this.S=b}r(ej,S);ej.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};ej.prototype.ca=function(a){return[Hd(vf(this.U,Bd(a[0])),[Kd(this.S)])]};function fj(a){this.c=a}r(fj,xh);fj.prototype.cb=function(a,b){this.G=a;yg(a,function(a){return a instanceof Fi}).forEach(function(a){var c=gj(a);if(0!=c.length){var e=Wi(new Ui(this.c,a.table),b,c.map(function(a){return me(b,a.hc)}));if(null!==e){var f=x();c.forEach(function(a){f.set(a.hc,a)},this);this.G=hj(this,e,f,a)}}},this);return this.G};function gj(a){var b=[];for(a=a.getParent();a;){if(a instanceof dj)b.push(a);else if(a instanceof Ji)break;a=a.getParent()}return b}
function hj(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(zg);b=new bj(a.c,b.$a,aj(b),!1);a=new ej(a.c,d.table);K(a,b);Dg(d,d,a,b);return b.Za()};function ij(a,b){S.call(this,0,-1);this.B=a.b(uc);this.S=b}r(ij,S);ij.prototype.toString=function(){return"insert("+this.S.getName()+")"};ij.prototype.ca=function(a,b,c){jj(this.S,c.values,this.B);b.zb(this.S,c.values);return[Hd(c.values,[this.S.getName()])]};function jj(a,b,c){a=a.Kb.nd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).X().Bc;var e=null===c?0:c;b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function kj(a,b){S.call(this,0,-1);this.B=a.b(uc);this.S=b}r(kj,S);kj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};kj.prototype.ca=function(a,b,c){jj(this.S,c.values,this.B);b.Rd(this.S,c.values);return[Hd(c.values,[this.S.getName()])]};function lj(){S.call(this,0,1)}r(lj,S);lj.prototype.toString=k("limit(?)");lj.prototype.Lc=function(a){return this.toString().replace("?",a.W.toString())};lj.prototype.ca=function(a,b,c){a[0].entries.splice(c.W);return a};function mj(a){S.call(this,0,1);this.M=a}r(mj,S);m=mj.prototype;m.toString=function(){return"order_by("+re(this.M)+")"};m.ca=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Ug(this.M[d].I);if(null!==b.Xa&&b.Xa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Cd(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Fg.bind(this));return a};
m.Z=function(a,b){var c,d,e,f=-1;do f++,e=this.M[f].I,c=this.M[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Fg=function(a,b){return this.Z(function(b){return b instanceof R?Cd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Cd(b,a):H(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.Z(function(b){return H(a,b)},function(a){return H(b,a)})};function nj(a,b){this.Ma=a;this.J=b}function oj(a){return a.J.some(function(a){return a instanceof R},a)?pj(a):qj(a)}function pj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Jb)return a=Cd(a.Ma,a.J[0]).entries.map(function(a){var b=new Id(new ec(-1,{}),1<this.Ma.L.size);Ld(b,this.J[0],H(a,this.J[0].child));return b},a),new G(a,[]);var b=new Id(new ec(-1,{}),1<a.Ma.L.size);a.J.forEach(function(a){var c=a instanceof R?Cd(this.Ma,a):H(this.Ma.entries[0],a);Ld(b,a,c)},a);return new G([b],a.Ma.s())}
function qj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(a,e){b[e]=new Id(new ec(a.ua.id(),{}),c);this.J.forEach(function(c){Ld(b[e],c,H(a,c))},this)},a);return new G(b,a.Ma.s())}function rj(a,b){var c=a.map(function(a){return oj(new nj(a,b)).entries[0]});return new G(c,a[0].s())};function sj(a,b){S.call(this,0,1);this.f=a;this.Nb=b}r(sj,S);sj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};sj.prototype.ca=function(a){0==a.length?a=[Ed()]:1==a.length?(a=a[0],a=[0==this.f.length?a:oj(new nj(a,this.f))]):a=[rj(a,this.f)];return a};function tj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function uj(){S.call(this,0,1)}r(uj,S);uj.prototype.toString=k("skip(?)");uj.prototype.Lc=function(a){return this.toString().replace("?",a.K.toString())};uj.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.K),a[0].s())]};function vj(){}r(vj,xh);vj.prototype.cb=function(a,b){if(!n(b.W)&&!n(b.K))return a;var c=wj(a);if(null===c)return a;yg(a,function(a){return a instanceof lj||a instanceof uj}).forEach(function(a){a instanceof lj?c.Mc=!0:c.Nc=!0;zg(a)},this);return c.Za()};function wj(a){a=yg(a,function(a){return a instanceof bj},function(a){return a instanceof sj&&tj(a)||a instanceof mj||1!=J(a).length||a instanceof dj});return 0<a.length?a[0]:null};function xj(a){this.c=a}r(xj,xh);xj.prototype.cb=function(a,b){this.G=a;var c=yj(this,b);if(0==c.length)return this.G;var d,e=0;do d=c[e++],a=zj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.G;b=Aj(this,a[0].$a.kc);return null===b?this.G:this.G=Bj(this,d,b,a)};function yj(a,b){return yg(a.G,function(a){if(!(a instanceof dj))return!1;a=me(b,a.hc);return a instanceof Fg&&"or"==a.nb})}function Aj(a,b){return yg(a.G,function(a){return a instanceof Fi&&a.table.getName()==b})[0]||null}
function zj(a,b,c){b=me(c,b.hc);var d=b.s();if(1!=d.size)return null;var d=C(d)[0],e=new Ui(a.c,d),f=null;return J(b).every(function(a){a=Wi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Bj(a,b,c,d){var e=new ej(a.c,c.table),f=new cj;K(e,f);d.forEach(function(a){a=new bj(this.c,a.$a,aj(a),!1);K(f,a)},a);zg(b);Dg(c,c,e,f);return f.Za()};function Cj(a){this.c=a}r(Cj,xh);Cj.prototype.cb=function(a,b){b=Dj(a,b);if(null===b)return a;a:{var c=b;a=Ej($d(b,0));if(null!==a){var d;d=b.M;for(var e=null,f=a.table.Ca(),h=0;h<f.length&&null===e;h++)e=Fj(f[h],d);d=e;if(null===d){a=c;break a}c=new bj(this.c,d.$a,new Qi(d.$a),d.Se);d=new ej(this.c,a.table);K(d,c);zg(b);c=Dg(a,a,d,c)}a=c}a==b&&(a=b,c=Gj($d(b,0)),null!==c&&(d=Fj(c.index,b.M),null!==d&&(c.je=d.Se,a=zg(b).parent)));return a.Za()};
function Gj(a){a=yg(a,function(a){return a instanceof bj},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Ej(a){a=yg(a,function(a){return a instanceof Fi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Dj(a,b){return n(b.M)?yg(a,function(a){return a instanceof mj})[0]:null}function Fj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.I.getName()==a.f[d].ba.getName()}))return null;b=Hj(b,a);return b[0]||b[1]?{$a:a,Se:b[1]}:null}
function Hj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Ij(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}Ij.prototype.ec=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function Jj(a){S.call(this,0,1);this.S=a}r(Jj,S);Jj.prototype.toString=function(){return"update("+this.S.getName()+")"};Jj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.S.ib(a.ua.Ia());c.set.forEach(function(a){b.l[a.I.getName()]=a.value},this);return b},this);b.update(this.S,a);return[Ed()]};function Kj(a){this.c=a;this.le=[new Oi,new fj(this.c),new xj(this.c),new Cj(this.c),new vj,new Gi(this.c)];this.Kd=[new fj(this.c)]}Kj.prototype.create=function(a,b){var c=a.Za();if(c instanceof kh||c instanceof jh)return Lj(this,a,b);if(c instanceof qh||c instanceof uh||c instanceof vh)return Lj(this,a,b,this.le);if(c instanceof lh||c instanceof mh)return Lj(this,a,b,this.Kd);throw new D(8);};
function Lj(a,b,c,d){a=wg(b.Za(),a.rg.bind(a));null!=d&&(a=(new Ij(a,c,d)).ec());return new se(a,b.da())}
Kj.prototype.rg=function(a){if(a instanceof qh)return new sj(a.f,a.Nb);if(a instanceof th)return new Hi(a.f);if(a instanceof sh)return new Yg(a.f);if(a instanceof rh)return new mj(a.M);if(a instanceof vh)return new uj;if(a instanceof uh)return new lj;if(a instanceof nh)return new dj(a.N.V());if(a instanceof ph)return new Ch;if(a instanceof wh)return new Ji(this.c,a.N,a.Pb);if(a instanceof oh)return new Fi(this.c,a.table);if(a instanceof lh)return new Di(a.table);if(a instanceof mh)return new Jj(a.table);
if(a instanceof kh)return new kj(this.c,a.table);if(a instanceof jh)return new ij(this.c,a.table);throw new D(514);};function Mj(a){this.og=new Ci;this.Ag=new Kj(a)};function Nj(){this.Ze=x()}function Oj(a,b){var c=a.Ze.get(b.getName())||null;null===c&&(c=new Pj,a.Ze.set(b.getName(),c));return c}function Qj(a,b,c,d){c.forEach(function(a){a=Oj(this,a);0==d?(a.bb=null,a.tc=b):3==d?(null===a.Vb&&(a.Vb=B()),a.Vb.add(b),null===a.Va&&(a.Va=B()),a.Va.delete(b)):1==d?(null===a.Va&&(a.Va=B()),a.Va.add(b)):2==d&&(a.bb=b)},a)}
function Rj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Oj(this,a);var c=null===a.Va||0==a.Va.size;e=0==d?(null===a.Vb||0==a.Vb.size)&&c&&null===a.tc&&null!==a.bb&&a.bb==b:3==d?null===a.tc&&null===a.bb&&null!==a.Va&&a.Va.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Sj(a,b,c,d){var e=Rj(a,b,c,d);e&&Qj(a,b,c,d);return e}Nj.prototype.releaseLock=function(a,b){b.forEach(function(b){Oj(this,b).releaseLock(a)},this)};
function Tj(a,b){b.forEach(function(a){Oj(this,a).bb=null},a)}function Pj(){this.Vb=this.Va=this.bb=this.tc=null}Pj.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.bb==a&&(this.bb=null);null===this.Va||this.Va.delete(a);null===this.Vb||this.Vb.delete(a)};function Uj(){this.Sb=new Vj;this.Ac=new Nj}function Ae(a,b){(2>b.getPriority()||2>b.getPriority())&&Tj(a.Ac,b.da());a.Sb.zb(b);Wj(a);return b.Cb.ha}function Wj(a){for(var b=a.Sb.yb(),c=0;c<b.length;c++){var d=b[c];if(0==d.F()?Xj(a,d,1,3):Xj(a,d,2,0)){a.Sb.remove(d);var e=a;d.exec().then(e.xg.bind(e,d),e.wg.bind(e,d))}}}function Xj(a,b,c,d){var e=!1;Sj(a.Ac,b.V(),b.da(),c)&&(e=Sj(a.Ac,b.V(),b.da(),d));return e}Uj.prototype.xg=function(a,b){this.Ac.releaseLock(a.V(),a.da());a.Cb.resolve(b);Wj(this)};
Uj.prototype.wg=function(a,b){this.Ac.releaseLock(a.V(),a.da());a.Cb.reject(b);Wj(this)};function Vj(){this.Sb=[]}Vj.prototype.zb=function(a){yf(this.Sb,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.V()-c.V():b})};Vj.prototype.yb=function(){return this.Sb.slice()};Vj.prototype.remove=function(a){var b=this.Sb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Yj(){this.Jc=x()}var Zj;function ak(){Zj||(Zj=new Yj);return Zj}Yj.prototype.clear=function(){this.Jc.clear()};Yj.prototype.clear=Yj.prototype.clear;Yj.prototype.pb=function(a,b){this.Jc.set(a.toString(),b);return b};Yj.prototype.registerService=Yj.prototype.pb;Yj.prototype.b=function(a){var b=this.Jc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Yj.prototype.getService=Yj.prototype.b;Yj.prototype.gd=function(a){return this.Jc.has(a.toString())};
Yj.prototype.isRegistered=Yj.prototype.gd;function bk(){var a=ak();return dc(a.Jc)};function ck(a,b,c,d){return null!=a?null!=b?dk(a,b,c,d):ek(a):fk()}function gk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function hk(a){var b=ak();a=new rc("ns_"+a);return b.gd(a)?b.b(a):null}function fk(){var a={};bk().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=hk(b).b(A).version())});return gk(a)}function ek(a){a=hk(a);var b={};if(null!=a){var c=a.b(uc);a.b(A).oa().forEach(function(a){b[a.getName()]=c.get(cf(a)).X().ia})}return gk(b)}
function dk(a,b,c,d){var e=hk(a);a=[];if(null!=e){var f=null;try{f=e.b(A).table(b)}catch(h){}null!=f&&(b=e.b(uc),e=e.b(tc),c=b.get(cf(f)).Sa(void 0,!1,c,d),c.length&&(a=vf(e,c).map(function(a){return a.l})))}return gk(a)};function ik(a,b){this.Ld=Wd();this.ge=a;this.jd=b;this.J=jk(this)}function jk(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.from.forEach(function(a){a.jb().forEach(function(a){b.push(a)})});return b}ik.prototype.Z=function(a,b){return this.J.every(function(c){return 6==c.F()||0==c.F()?H(a,c)===H(b,c):Xd(this.Ld,c.F(),"eq")(H(a,c),H(b,c))},this)};
function kk(a,b,c){var d=null===b?[]:b.entries,e=pb(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var l=d[h];e[f]==l?f++:(l=a.jd.splice(f,1),l=lk(h,l,0,a.jd),b.push(l))}e=pb(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)l=c.entries[h],e[f]==l?f++:(a.jd.splice(h,0,l.ua.l),l=lk(h,[],1,a.jd),b.push(l));return b}function lk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function mk(){this.dc=x()}mk.prototype.xd=function(a,b){var c=ka(a.query).toString(),d=this.dc.get(c)||null;null===d&&(d=new nk(a),this.dc.set(c,d));d.xd(b)};mk.prototype.he=function(a,b){a=ka(a.query).toString();var c=this.dc.get(a)||null;c.he(b);0<c.Dc.size||this.dc.delete(a)};function ze(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.dc.forEach(function(a){a=a.xc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function xe(a,b,c){b=ka(null!=b.Sc?b.Sc:b).toString();a=a.dc.get(b)||null;null!==a&&ok(a,c)}function nk(a){this.Cf=a;this.Dc=B();this.ug=[];this.Xe=null;this.Nf=new ik(a.query,this.ug)}nk.prototype.xd=function(a){this.Dc.has(a)||this.Dc.add(a)};nk.prototype.he=function(a){return this.Dc.delete(a)};nk.prototype.xc=function(){var a=this.Cf;return{context:a.query,de:ai(a)}};function ok(a,b){var c=kk(a.Nf,a.Xe,b);a.Xe=b;0<c.length&&a.Dc.forEach(function(a){a(c)})};function pk(a,b){var c=a.b(A),d=b||{};b=new uf(c);a.pb(tc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(n(cc)||(cc=new bc),b=cc,b=b.bg?0:b.Qg?4:1);switch(b){case 0:b=new Ze(a,c);break;case 1:b=new ff(c);break;case 5:b=new hf(c);break;case 4:b=new rf(a,c,d.webSqlDbSize);break;case 3:b=new Me(c,d.firebase);e=!0;break;default:throw new D(300);}a.pb(sc,b);var f=new vg;a.pb(uc,f);return b.Da(d.onUpgrade).then(function(){var b=new Mj(a);a.pb(vc,b);b=new Uj;a.pb(wc,b);b=new mk;a.pb(xc,b);return f.Da(c)}).then(function(){if(e){var b=
new Be(a);b.Na.subscribe(b.Zd.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=ck);return(new og(a)).Da(c)})};function qk(a){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w()}function rk(a){var b=a.c.b(uc),c=a.c.b(tc),d={};a.g.oa().forEach(function(a){var e=b.get(cf(a)).Sa(),e=vf(c,e).map(function(a){return a.l});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=qk.prototype;m.exec=function(){var a=rk(this),a=new Id(new ec(-1,a),!0);return v([new G([a],[])])};m.F=k(0);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=k(0);function sk(a,b){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w();this.Aa=b;this.Na=a.b(sc);this.U=a.b(tc);this.B=a.b(uc)}m=sk.prototype;
m.exec=function(){if(!(this.Na instanceof Ze||this.Na instanceof ff||this.Na instanceof rf))throw new D(300);var a;a:{a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.B.get(cf(a[b])).X().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new D(111);if(null==this.Aa.tables)throw new D(112);return tk(this)};m.F=k(1);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=k(0);
function tk(a){var b=new ld(a.c,a.aa),b=a.Na.Db(a.F(),C(a.aa),b),c;for(c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.vb(a)}),f=b.H(c,d.ib,0);a.U.Ub(c,e);var h=a.B.jc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function uk(a,b){this.c=a;this.Na=a.b(sc);this.Ha=a.b(wc);this.Gb=a.b(xc);this.aa=B(b);this.Pa=new ld(this.c,this.aa);this.Cb=w();this.uc=w();this.ue=w()}m=uk.prototype;m.exec=function(){this.ue.resolve();return this.uc.ha};m.F=k(1);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=k(2);function vk(a){Ae(a.Ha,a);return a.ue.ha}
function wk(a,b){b=b.xc();return b.de.Za().exec(a.Pa,b.context).then(function(a){return Ad(a[0])},function(a){this.Pa.Hb();var b=new jb(a.name);this.uc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Na.Db(this.F(),C(this.aa),this.Pa);this.ja.ka().then(function(){this.Ic();this.uc.resolve()}.bind(this),function(a){this.Pa.Hb();this.uc.reject(a)}.bind(this));return this.Cb.ha};m.Hb=function(){this.Pa.Hb();this.uc.resolve();return this.Cb.ha};
m.Ic=function(){var a=ze(this.Gb,this.aa);0!=a.length&&(a=new we(this.c,a),Ae(this.Ha,a))};m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ha=a.b(wc);this.Ib=null;this.Ra=0;0==xk.size&&(xk.set(0,B([1,4])),xk.set(1,B([2])),xk.set(2,B([3,5,6])),xk.set(3,B([2,7])),xk.set(4,B([7])),xk.set(5,B([7])),xk.set(6,B([7])))}q("lf.proc.Transaction",V);var xk=x();function yk(a,b){var c=xk.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
V.prototype.exec=function(a){yk(this,4);var b=[];try{a.forEach(function(a){a.Ya();b.push(a.xc())},this)}catch(c){return yk(this,7),bb(c)}this.Ib=new Dh(this.c,b);return Ae(this.Ha,this.Ib).then(function(a){yk(this,7);return a.map(function(a){return Ad(a)})}.bind(this),function(a){yk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Af=function(a){yk(this,1);this.Ib=new uk(this.c,a);return vk(this.Ib).then(function(){yk(this,2)}.bind(this))};V.prototype.begin=V.prototype.Af;
V.prototype.zf=function(a){yk(this,3);try{a.Ya()}catch(b){return yk(this,7),bb(b)}return wk(this.Ib,a).then(function(a){yk(this,2);return a}.bind(this),function(a){yk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.zf;V.prototype.ka=function(){yk(this,5);return this.Ib.ka().then(function(){yk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Hb=function(){yk(this,6);return this.Ib.Hb().then(function(){yk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Hb;
V.prototype.X=function(){if(7!=this.Ra)throw new D(105);return this.Ib.X()};V.prototype.stats=V.prototype.X;function W(a){this.c=a;this.g=a.b(A);this.dd=!1}q("lf.proc.Database",W);W.prototype.Da=function(a){this.c.pb(A,this.g);return pk(this.c,a).then(function(){this.dd=!0;this.Ha=this.c.b(wc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.xb=g("g");W.prototype.getSchema=W.prototype.xb;function zk(a){if(!a.dd)throw new D(2);}W.prototype.select=function(a){zk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.zb=function(){zk(this);return new ci(this.c)};W.prototype.insert=W.prototype.zb;W.prototype.Rd=function(){zk(this);return new ci(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Rd;W.prototype.update=function(a){zk(this);return new mi(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){zk(this);return new bi(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){zk(this);this.c.b(xc).xd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){zk(this);this.c.b(xc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Jf=function(){zk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Jf;W.prototype.close=function(){try{this.c.b(sc).close()}catch(a){}this.c.clear();this.dd=!1};W.prototype.close=W.prototype.close;
W.prototype.Tf=function(){zk(this);var a=new qk(this.c);return Ae(this.Ha,a).then(function(a){return Ad(a[0])[0]})};W.prototype["export"]=W.prototype.Tf;W.prototype.import=function(a){zk(this);a=new sk(this.c,a);return Ae(this.Ha,a).then(k(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Te=c;this.Re=d;this.sf=e;this.Ja=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.j=function(){return Kd(this.S)+"."+this.w};m.toString=function(){return this.j()};m.H=g("S");m.F=g("sf");X.prototype.getType=X.prototype.F;X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.H().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!n(this.fa)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.fc=g("Re");X.prototype.isNullable=X.prototype.fc;X.prototype.zc=g("Te");X.prototype.Oa=function(a){return Og(this,a,"eq")};X.prototype.eq=X.prototype.Oa;X.prototype.$e=function(a){return Og(this,a,"neq")};X.prototype.neq=X.prototype.$e;X.prototype.pg=function(a){return Og(this,a,"lt")};
X.prototype.lt=X.prototype.pg;X.prototype.qg=function(a){return Og(this,a,"lte")};X.prototype.lte=X.prototype.qg;X.prototype.Xf=function(a){return Og(this,a,"gt")};X.prototype.gt=X.prototype.Xf;X.prototype.Yf=function(a){return Og(this,a,"gte")};X.prototype.gte=X.prototype.Yf;X.prototype.match=function(a){return Og(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Bf=function(a,b){return Og(this,[a,b],"between")};X.prototype.between=X.prototype.Bf;
X.prototype.Zf=function(a){return Og(this,a,"in")};X.prototype["in"]=X.prototype.Zf;X.prototype.jg=function(){return this.Oa(null)};X.prototype.isNull=X.prototype.jg;X.prototype.ig=function(){return this.$e(null)};X.prototype.isNotNull=X.prototype.ig;X.prototype.oc=function(a){return new X(this.S,this.w,this.Te,this.Re,this.sf,a)};X.prototype.as=X.prototype.oc;function Ak(a){this.g=a;this.Dd=new Uc;this.ie=new Uc;this.bf=new Uc;this.De=x();this.h=new Uc;this.ze=new Uc;this.gf=new Uc;this.Ce=new Uc;Bk(this)}function Bk(a){a.g.oa().forEach(function(a){var b=a.getName();a.Kb.Pd.forEach(function(c){this.bf.set(b,this.g.table(c.Ua));this.h.set(c.Ua,a);0==c.action?(this.ie.set(c.Ua,c),this.gf.set(c.Ua,a)):(this.Dd.set(c.Ua,c),this.ze.set(c.Ua,a));this.De.set(a.getName()+"."+c.tb,c.Ua);this.Ce.set(c.Ua+"."+c.Fc,a.getName())},this)},a)}
function bd(a,b,c){if(null!=c)return 1==c?a.Dd.get(b):a.ie.get(b);c=a.Dd.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Jh(a,b){a=b.get(a);return null===a?[]:a}function Lh(a,b){var c=B();b.forEach(function(a){(a=this.De.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Hh(a,b,c){return null!=c?0==c?Jh(b,a.gf):Jh(b,a.ze):Jh(b,a.h)}
function Mh(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Ck(a,b,c){this.nd=a;this.tg=b;this.Pd=c}q("lf.schema.Constraint",Ck);Ck.prototype.Wf=g("nd");Ck.prototype.getPrimaryKey=Ck.prototype.Wf;Ck.prototype.Vf=g("Pd");Ck.prototype.getForeignKeys=Ck.prototype.Vf;function Dk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Be=b;this.tb=a.local;this.Ua=d[0];this.Fc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Ek(a);this.Ld=Wd();this.w=a;this.J=x();this.ud=B();this.lc=B();this.hd=B();this.Ea=null;this.sa=x();this.md=!1;this.wb=[]}q("lf.schema.TableBuilder",Y);function Fk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Gk=B([0,6]);function Ek(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Hk(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.sa.has(b)||a.lc.has(b))throw new D(503,a.w+"."+b);}
function Ik(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Jk(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.tb)},a))throw new D(543,a.wb[c].name);}}
function Kk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.w+"."+e);},a)}}function Lk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.hd.has(a.name))throw new D(545,this.w+"."+a.name);},a)}Y.prototype.uf=function(a,b){Ek(a);Hk(this,a);this.J.set(a,b);Gk.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.uf;
Y.prototype.wf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));Ek(this.Ea);Hk(this,this.Ea);a=Mk(this,a,!0,void 0,b);Ik(this,a);1==a.length&&this.ud.add(a[0].name);this.lc.add(this.Ea);this.sa.set(this.Ea,a);return this};Y.prototype.addPrimaryKey=Y.prototype.wf;
Y.prototype.vf=function(a,b){Ek(a);Hk(this,a);b=new Dk(b,this.w,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.J.has(b.tb))throw new D(540,a);this.wb.push(b);this.ve(a,[b.tb],this.ud.has(b.tb));return this};Y.prototype.addForeignKey=Y.prototype.vf;Y.prototype.xf=function(a,b){Ek(a);Hk(this,a);b=Mk(this,b,!0);1==b.length&&(this.ud.add(b[0].name),Nk(this,b[0].name));this.sa.set(a,b);this.lc.add(a);return this};Y.prototype.addUnique=Y.prototype.xf;
function Nk(a,b){a.wb.forEach(function(a){a.tb==b&&this.lc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){Mk(this,a,!1).forEach(function(a){this.hd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;Y.prototype.ve=function(a,b,c,d){Ek(a);Hk(this,a);b=Mk(this,b,!0,d);c&&this.lc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;Y.prototype.Bb=ca("md");Y.prototype.persistentIndex=Y.prototype.Bb;
Y.prototype.xb=function(){Jk(this);Kk(this);Lk(this);return new (Ok(this))};Y.prototype.getSchema=Y.prototype.xb;function Mk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Fk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Fk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Ok(a){function b(){function b(b){return a.sa.get(b).map(function(a){return{ba:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=dc(a.J).map(function(b){this[b]=new X(this,b,a.ud.has(b),a.hd.has(b),a.J.get(b));return this[b]},this),e=dc(a.sa).map(function(c){return new Qg(a.w,c,a.lc.has(c),b.call(this,c))},this);Q.call(this,a.w,d,e,a.md);var f=null===a.Ea?null:new Qg(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.hd.has(b.getName())});this.Kb=new Ck(f,
h,a.wb);this.kf=Pk(a,d,e)}r(b,Q);b.prototype.vb=function(a){return new this.kf(fc++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.ib=function(a){var b={};this.jb().forEach(function(c){var d=c.getName();c=c.F();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);for(var e=new ArrayBuffer(c.length/2),l=new Uint8Array(e),p=0,L=0;p<c.length;p+=2)l[L++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.kf(a.id,b)};
b.prototype.deserializeRow=b.prototype.ib;b.prototype.Ie=g("Kb");b.prototype.getConstraint=b.prototype.Ie;return b}
function Pk(a,b,c){function d(a,d){this.J=b;this.sa=c;ec.call(this,a,d)}r(d,ec);d.prototype.Fe=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.fc()?null:Tc[b.F()]});return a};d.prototype.rf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.F();var d=this.l[c];a[c]=0==b?null!=d?ic(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Ld.Ue.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.lb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Qk(a,b){this.g=new Z(a,b);this.rb=x();this.vc=!1;this.i=null;this.Uc=!1}q("lf.schema.Builder",Qk);function Rk(a,b){b.wb.forEach(function(a){var c=a.Ua;if(!this.rb.has(c))throw new D(536,a.name);var c=this.rb.get(c).xb(),e=a.Fc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.xb()[a.tb].F()!=c[e].F())throw new D(538,a.name);if(!c[e].zc())throw new D(539,a.name);},a)}
Qk.prototype.Ff=function(a){a.wb.forEach(function(a){this.rb.get(a.Ua).wb.forEach(function(b){if(b.tb==a.Fc)throw new D(534,a.name);},this)},this)};function Sk(a){a.vc||(a.rb.forEach(function(a){Rk(this,a);a=a.xb();this.g.L.set(a.getName(),a)},a),y(a.rb).forEach(a.Ff,a),Tk(a),a.rb.clear(),a.vc=!0)}function Uk(a,b,c){b.se||(b.se=!0,b.$d=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.se)Uk(this,a,c);else if(a.$d&&b!=a)throw new D(533);},a));b.$d=!1}
function Tk(a){var b=x();a.g.L.forEach(function(a,d){b.set(d,new Vk(d))},a);a.rb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Ua).Ge.add(d)})});y(b).forEach(function(a){Uk(this,a,b)},a)}function Vk(a){this.$d=this.se=!1;this.Ge=B();this.kc=a}Qk.prototype.xb=function(){this.vc||Sk(this);return this.g};Qk.prototype.getSchema=Qk.prototype.xb;Qk.prototype.Le=function(){var a=new rc("ns_"+this.g.name()),b=ak(),c;b.gd(a)?c=b.b(a):(c=new Yj,b.pb(a,c));return c};Qk.prototype.getGlobal=Qk.prototype.Le;
Qk.prototype.connect=function(a){if(this.Uc||null!==this.i&&this.i.dd)throw new D(113);this.Uc=!0;if(null===this.i){var b=this.Le();b.gd(A)||b.pb(A,this.xb());this.i=new W(b)}return this.i.Da(a).then(function(a){this.Uc=!1;return a}.bind(this),function(a){this.Uc=!1;throw a;}.bind(this))};Qk.prototype.connect=Qk.prototype.connect;Qk.prototype.If=function(a){if(this.rb.has(a))throw new D(503,a);if(this.vc)throw new D(535);this.rb.set(a,new Y(a));return this.rb.get(a)};Qk.prototype.createTable=Qk.prototype.If;
Qk.prototype.me=function(a){if(this.vc)throw new D(535);this.g.me(a);return this};Qk.prototype.setPragma=Qk.prototype.me;function Z(a,b){this.w=a;this.Yb=b;this.L=x();this.ee={Of:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Yb");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return y(this.L)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Qe||(this.Qe=new Ak(this));return this.Qe};Z.prototype.Bg=g("ee");Z.prototype.pragma=Z.prototype.Bg;Z.prototype.me=ca("ee");q("lf.schema.create",function(a,b){return new Qk(a,b)});u.prototype.catch=u.prototype.pe;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
